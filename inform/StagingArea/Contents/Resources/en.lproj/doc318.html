<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="indoc_WI.css" rel="stylesheet" type="text/css">
    <!--Generated by indoc-->
    <title>18.34. Implicitly taking something</title>
    <script type="text/javascript">
            function showExtra(id, imid) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                    document.getElementById(imid).src = 'inform:/doc_images/extra.png';
                } else {
                    document.getElementById(id).style.display = 'block';
                    document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
                }
            }
            function onLoaded() {
                if (window.location.hash) {
                    var hash = window.location.hash.substring(2);
                    if (hash.search("_") >= 0) {
                        var res = hash.split("_");
                        showExample("example"+res[1]);
                    } else {
                        showExample("example"+hash);
                    }
                }
            }
            window.onload=onLoaded;
            function showExample(id) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                } else {
                    document.getElementById(id).style.display = 'block';
                }
            }
            function openExtra(id, imid) {
                document.getElementById(id).style.display = 'block';
                document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
            }
            function closeExtra(id, imid) {
                document.getElementById(id).style.display = 'none';
                document.getElementById(imid).src = 'inform:/doc_images/extra.png';
            }
    </script>
</head>
<body class="paper papertint">
    <script type="text/javascript">
        function pasteCode(code) {
            var myProject = window.Project;

            myProject.selectView('source');
            myProject.pasteCode(code);
        }
    </script>
    <script type="text/javascript">
        function createNewProject(code, title) {
            var myProject = window.Project;

            myProject.createNewProject(title, code);
        }
    </script>

    <!--SEARCH TITLE "Implicitly taking something"-->
    <!--SEARCH SECTION "18.34"-->
    <!--SEARCH SORT "000-018-034-000"-->
    <!--START IGNORE 317-->
    <div class="bookheader">
        <table class="fullwidth midnightblack">
            <tr>
                <td class="midnightbannerleftcell">
                    <a href="doc317.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft"></a>
                </td>
                <td class="midnightbannercentrecell">
                    <a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 18: Activities</span></a>
                </td>
                <td class="midnightbannerrightcell">
                    <a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup"></a><a href="doc319.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright"></a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
    <p class="sectionheading">§18.34. Implicitly taking something</p>
    <p><span class="boldface">1. When it happens.</span> When an action is tried which requires the actor (normally the player, of course) to be carrying something, but which is not in fact carried by that person. For instance, if the player types WEAR OVERCOAT in reference to a Moroccan overcoat currently draped over a chair.</p>
    <p><span class="boldface">2. The default behaviour.</span> To print text such as &quot;(first taking the Moroccan overcoat)&quot; and then silently try taking the object in question (the overcoat). If the take succeeds, the silence means that nothing else is printed: if it fails, it will say why.</p>
    <p>No matter what rules are written for this activity, it is impossible to use it to allow the action to go ahead even without the item. The activity allows us to change how, or if, an implicit take will happen, but not to change the consequences of failure. (To do that, we would need to say that &quot;The carrying requirements rule does nothing&quot;, but this kind of unstitching of the action machinery needs to be done with caution.)</p>
    <p><span class="boldface">3. Examples.</span> (a) Forbidding implicit takes for certain dangerous items. (This seems especially fair if taking such items might cause death: the player will not wish to be killed on the strength only of our guess as to what he might be intending to do.)</p>
    <!--START CODE "c7236"-->
    <blockquote class="code"><p class="quoted"><a id="c7236"></a>Rule for implicitly taking the curare:
    <br>
    &#160;&#160;&#160;&#160;say &quot;Ordinarily you'd pick up the curare in order to be able to do that, but this seems like a good moment for caution.&quot; instead.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>(b) Changing the way the implicit action is reported for the player:</p>
    <!--START CODE "c7237"-->
    <blockquote class="code"><p class="quoted"><a id="c7237"></a>Rule for implicitly taking something (called target):
    <br>
    &#160;&#160;&#160;&#160;try silently taking the target;
    <br>
    &#160;&#160;&#160;&#160;if the player carries the target, say &quot;You appropriate [the target] first, of course. [run paragraph on]&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>(c) Combining implicit takes when the noun and second noun must both be carried:</p>
    <!--START CODE "c7238"-->
    <blockquote class="code"><p class="quoted"><a id="c7238"></a>Rule for implicitly taking the noun when the second noun is a thing and the second noun is not carried by the player:
    <br>
    &#160;&#160;&#160;&#160;try silently taking the noun;
    <br>
    &#160;&#160;&#160;&#160;try silently taking the second noun;
    <br>
    &#160;&#160;&#160;&#160;say &quot;(first taking both [the noun] and [the second noun])[line break]&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>(d) Making another character reply amusingly:</p>
    <!--START CODE "c7239"-->
    <blockquote class="code"><p class="quoted"><a id="c7239"></a>Rule for implicitly taking something which is carried by the player when the person asked is Clark:
    <br>
    &#160;&#160;&#160;&#160;say &quot;'I don't see how I'm supposed to do that when you're holding [the noun],' remarks Clark sulkily.&quot; instead.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>(e) Causing implicit takes which wouldn't otherwise happen. Suppose we have a photographing action, and there are very small flowers which can't conveniently be snapped without being first picked. We then want an implicit take to occur, even though we wouldn't want this for other sorts of photography. So:</p>
    <!--START CODE "c7240"-->
    <blockquote class="code"><p class="quoted"><a id="c7240"></a>Check an actor photographing a flower:
    <br>
    &#160;&#160;&#160;&#160;if the actor is not carrying the noun:
    <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;carry out the implicitly taking activity with the noun;
    <br>
    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the actor is not carrying the noun, stop the action.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Note that if the activity doesn't succeed in taking the item, it's expected to print some text explaining this, which is why we don't need to say anything further.</p>
    <hr>
    <div class="bookexamples">
        <p class="chapterheading"></p>
        <!--START EXAMPLE "377: The Big Sainsbury's" "e34"-->
        <a id="e34"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example34'); return false;"><b>377</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example34'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">The Big Sainsbury's</span></b></a><br>
                    Making implicit takes add a minute to the clock, just as though the player had typed TAKE THING explicitly.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc17.html#e34"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example34" style="display: none;">
            <p>Implicit takes are a convenience to players; in general, we would like to avoid asking players to type any more obvious commands than strictly necessary, while allowing the computer to guess as much as it safely can.</p>
            <p>Occasionally, though, we have designed a timed puzzle in which the player has a limited number of moves in which to accomplish his objectives. In that case, the implicit take complicates matters, because it means that a player who types</p>
            <!--START CODE "c7241_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7241_34"></a>&gt;EAT GATEAU
            <br>
            (first taking the gateau...)
            </p>
            </blockquote>
            <!--END CODE-->
            <p>gets away with a spare move compared to the precise but naïf dupe who types</p>
            <!--START CODE "c7242_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7242_34"></a>&gt;TAKE GATEAU
            <br>
            &gt;EAT GATEAU
            </p>
            </blockquote>
            <!--END CODE-->
            <p>...and really, that doesn't seem quite fair. The way to fix this problem is to fill in the extra minute on the clock during the implicit take; and that is indeed what we do in the following example.</p>
            <!--START CODE "c7243_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7243_34"></a><a href="javascript:pasteCode('[=0x0022=]The Big Sainsbury[=0x0027=]s[=0x0022=][=0x000A=][=0x000A=]Sainsbury[=0x0027=]s is a room.[=0x000A=][=0x000A=]The crispy duck and the Guinness steak pie are edible things in Sainsbury[=0x0027=]s.[=0x000A=][=0x000A=]Rule for implicitly taking something:[=0x000A=][=0x0009=]follow the advance time rule;[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=][time of day][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]take crispy duck / eat crispy duck / eat steak pie[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]The Big Sainsbury[=0x0027=]s[=0x0022=][=0x000A=][=0x000A=]Sainsbury[=0x0027=]s is a room.[=0x000A=][=0x000A=]The crispy duck and the Guinness steak pie are edible things in Sainsbury[=0x0027=]s.[=0x000A=][=0x000A=]Rule for implicitly taking something:[=0x000A=][=0x0009=]follow the advance time rule;[=0x000A=][=0x0009=]continue the activity.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=][time of day][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]take crispy duck / eat crispy duck / eat steak pie[=0x0022=].[=0x000A=]\n', 'Example - The Big Sainsbury[=0x0027=]s')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;The Big Sainsbury's&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7244_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7244_34"></a>Sainsbury's is a room.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7245_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7245_34"></a>The crispy duck and the Guinness steak pie are edible things in Sainsbury's.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7246_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7246_34"></a>Rule for implicitly taking something:
            <br>
            &#160;&#160;&#160;&#160;follow the advance time rule;
            <br>
            &#160;&#160;&#160;&#160;continue the activity.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7247_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7247_34"></a>When play begins:
            <br>
            &#160;&#160;&#160;&#160;now the right hand status line is &quot;[time of day]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7248_34"-->
            <blockquote class="code"><p class="quoted"><a id="c7248_34"></a>Test me with &quot;take crispy duck / eat crispy duck / eat steak pie&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <!--START EXAMPLE "378: Pizza Prince" "e292"-->
        <a id="e292"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example292'); return false;"><b>378</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example292'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Pizza Prince</span></b></a><br>
                    Providing a pizza buffet from which the player can take as many pieces as he wants.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc82.html#e292"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example292" style="display: none;">
            <p>Suppose we want the player to have a pizza buffet from which he can take a number of slices. But we don't want to actually put the slices there in front of him, because &quot;you can see 17 slices of pizza here&quot; is not the descriptive effect we want, and because we want to pretend, at least, that the pizza supply is nearly infinite. In fact, we're going to replenish the supply by allowing eaten slices to return to the buffet table (safer in IF than in real life).</p>
            <p>To do this, we create one object to stand in for the pizza supply, but whenever the player tries to take it, we give him a different &quot;pizza slice&quot; object instead. Thus:</p>
            <!--START CODE "c7249_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7249_292"></a><a href="javascript:pasteCode('[=0x0022=]Pizza Prince[=0x0022=][=0x000A=][=0x000A=]The Pizza Prince is a room.[=0x000A=][=0x000A=]The buffet table is a supporter in Pizza Prince.[=0x000A=][=0x000A=]The pizza selection is a thing on the buffet table. Understand [=0x0022=]slice[=0x0022=] as the pizza selection. The description is [=0x0022=]They are all cheese-only, and all luke-warm.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the buffet table:[=0x000A=][=0x0009=]say [=0x0022=]On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break][=0x0022=].[=0x000A=][=0x000A=][Now we introduce our actual pizza slices, which are retained in a container out of play until they[=0x0027=]re needed:][=0x000A=][=0x000A=]A pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.][=0x000A=][=0x000A=][In this example we[=0x0027=]ve set that supply to be artificially small, to make it easier to test what happens when the player reaches the limit; but we could provide many more slices to start with in Pizza Limbo, and the aim in practice would be to pick a number high enough (such as 50 or 100) that the average player will get bored of TAKE PIZZA long before he reaches the limit.][=0x000A=][=0x000A=][The main thing to be aware of is that objects consume memory in the game file, so creating a large number of pizza slices might bulk the game out. This is more of a concern if we[=0x0027=]re compiling for the Z-machine than if we[=0x0027=]re compiling for Glulx.][=0x000A=][=0x000A=][Whenever the player tries to take the selection, we want him to wind up holding an individual slice instead; but of course we need to check and make sure that he hasn[=0x0027=]t exhausted the pizza slice supply.][=0x000A=][=0x000A=]Instead of taking the pizza selection:[=0x000A=][=0x0009=]let chosen slice be a random pizza slice in Pizza Limbo;[=0x000A=][=0x0009=]if chosen slice is nothing: [That is, there were no slices remaining][=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][manager refusal][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]move the chosen slice to the player;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Taken (gingerly).[=0x0022=][=0x000A=][=0x000A=]To say manager refusal:[=0x000A=][=0x0009=]say [=0x0022=][one of][=0x0027=]Hey![=0x0027=] barks a hitherto-unseen manager from behind you. [=0x0027=]It[=0x0027=]s an [=0x0027=]all you can eat[=0x0027=] buffet, not an [=0x0027=]all you can stuff down your pants[=0x0027=] buffet.[=0x0027=][or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping][=0x0022=][=0x000A=][=0x000A=][That[=0x0027=]s fine for the case where the player is taking a new slice of pizza explicitly, but we need to handle it a little differently if the taking action is generated in response to EAT PIZZA. In that case, we need to take the slice and also change the identity of the noun, because after the implicit take action happens, the game will test whether the player is holding the noun before attempting to eat it. So we need to refocus its attention:][=0x000A=][=0x000A=]Rule for implicitly taking the pizza selection:[=0x000A=][=0x0009=]let chosen slice be a random pizza slice in Pizza Limbo;[=0x000A=][=0x0009=]if chosen slice is nothing: [That is, there were no slices remaining][=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][manager refusal][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]move the chosen slice to the player;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](helping yourself from the selection)[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now the noun is the chosen slice.[=0x000A=][=0x000A=][And finally, a bit of touch-up:][=0x000A=][=0x000A=]Rule for clarifying the parser[=0x0027=]s choice of the pizza selection while taking:[=0x000A=][=0x0009=]say [=0x0022=](from the magnificent selection before you)[line break][=0x0022=][=0x000A=][=0x000A=][For tidiness, we should probably also return the consumed pizza slices to Pizza Limbo so that they can be re-used later:][=0x000A=][=0x000A=]After eating a pizza slice:[=0x000A=][=0x0009=]move the noun to Pizza Limbo;[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]Pizza Prince[=0x0022=][=0x000A=][=0x000A=]The Pizza Prince is a room.[=0x000A=][=0x000A=]The buffet table is a supporter in Pizza Prince.[=0x000A=][=0x000A=]The pizza selection is a thing on the buffet table. Understand [=0x0022=]slice[=0x0022=] as the pizza selection. The description is [=0x0022=]They are all cheese-only, and all luke-warm.[=0x0022=][=0x000A=][=0x000A=]Rule for writing a paragraph about the buffet table:[=0x000A=][=0x0009=]say [=0x0022=]On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break][=0x0022=].[=0x000A=][=0x000A=][Now we introduce our actual pizza slices, which are retained in a container out of play until they[=0x0027=]re needed:][=0x000A=][=0x000A=]A pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.][=0x000A=][=0x000A=][In this example we[=0x0027=]ve set that supply to be artificially small, to make it easier to test what happens when the player reaches the limit; but we could provide many more slices to start with in Pizza Limbo, and the aim in practice would be to pick a number high enough (such as 50 or 100) that the average player will get bored of TAKE PIZZA long before he reaches the limit.][=0x000A=][=0x000A=][The main thing to be aware of is that objects consume memory in the game file, so creating a large number of pizza slices might bulk the game out. This is more of a concern if we[=0x0027=]re compiling for the Z-machine than if we[=0x0027=]re compiling for Glulx.][=0x000A=][=0x000A=][Whenever the player tries to take the selection, we want him to wind up holding an individual slice instead; but of course we need to check and make sure that he hasn[=0x0027=]t exhausted the pizza slice supply.][=0x000A=][=0x000A=]Instead of taking the pizza selection:[=0x000A=][=0x0009=]let chosen slice be a random pizza slice in Pizza Limbo;[=0x000A=][=0x0009=]if chosen slice is nothing: [That is, there were no slices remaining][=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][manager refusal][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]move the chosen slice to the player;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]Taken (gingerly).[=0x0022=][=0x000A=][=0x000A=]To say manager refusal:[=0x000A=][=0x0009=]say [=0x0022=][one of][=0x0027=]Hey![=0x0027=] barks a hitherto-unseen manager from behind you. [=0x0027=]It[=0x0027=]s an [=0x0027=]all you can eat[=0x0027=] buffet, not an [=0x0027=]all you can stuff down your pants[=0x0027=] buffet.[=0x0027=][or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping][=0x0022=][=0x000A=][=0x000A=][That[=0x0027=]s fine for the case where the player is taking a new slice of pizza explicitly, but we need to handle it a little differently if the taking action is generated in response to EAT PIZZA. In that case, we need to take the slice and also change the identity of the noun, because after the implicit take action happens, the game will test whether the player is holding the noun before attempting to eat it. So we need to refocus its attention:][=0x000A=][=0x000A=]Rule for implicitly taking the pizza selection:[=0x000A=][=0x0009=]let chosen slice be a random pizza slice in Pizza Limbo;[=0x000A=][=0x0009=]if chosen slice is nothing: [That is, there were no slices remaining][=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][manager refusal][=0x0022=];[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]move the chosen slice to the player;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](helping yourself from the selection)[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]now the noun is the chosen slice.[=0x000A=][=0x000A=][And finally, a bit of touch-up:][=0x000A=][=0x000A=]Rule for clarifying the parser[=0x0027=]s choice of the pizza selection while taking:[=0x000A=][=0x0009=]say [=0x0022=](from the magnificent selection before you)[line break][=0x0022=][=0x000A=][=0x000A=][For tidiness, we should probably also return the consumed pizza slices to Pizza Limbo so that they can be re-used later:][=0x000A=][=0x000A=]After eating a pizza slice:[=0x000A=][=0x0009=]move the noun to Pizza Limbo;[=0x000A=][=0x0009=]continue the action.[=0x000A=][=0x000A=]Test me with [=0x0022=]i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g[=0x0022=].[=0x000A=]\n', 'Example - Pizza Prince')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;Pizza Prince&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7250_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7250_292"></a>The Pizza Prince is a room.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7251_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7251_292"></a>The buffet table is a supporter in Pizza Prince.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7252_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7252_292"></a>The pizza selection is a thing on the buffet table. Understand &quot;slice&quot; as the pizza selection. The description is &quot;They are all cheese-only, and all luke-warm.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7253_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7253_292"></a>Rule for writing a paragraph about the buffet table:
            <br>
            &#160;&#160;&#160;&#160;say &quot;On [the buffet table] is [a pizza selection]. [description of the pizza selection][line break]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Now we introduce our actual pizza slices, which are retained in a container out of play until they're needed:</p>
            <!--START CODE "c7254_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7254_292"></a>A pizza slice is a kind of thing. 10 pizza slices are in Pizza Limbo. A pizza slice is always edible. [After a fashion, anyway.]
            </p>
            </blockquote>
            <!--END CODE-->
            <p>In this example we've set that supply to be artificially small, to make it easier to test what happens when the player reaches the limit; but we could provide many more slices to start with in Pizza Limbo, and the aim in practice would be to pick a number high enough (such as 50 or 100) that the average player will get bored of TAKE PIZZA long before he reaches the limit.</p>
            <p>The main thing to be aware of is that objects consume memory in the game file, so creating a large number of pizza slices might bulk the game out. This is more of a concern if we're compiling for the Z-machine than if we're compiling for Glulx.</p>
            <p>Whenever the player tries to take the selection, we want him to wind up holding an individual slice instead; but of course we need to check and make sure that he hasn't exhausted the pizza slice supply.</p>
            <!--START CODE "c7255_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7255_292"></a>Instead of taking the pizza selection:
            <br>
            &#160;&#160;&#160;&#160;let chosen slice be a random pizza slice in Pizza Limbo;
            <br>
            &#160;&#160;&#160;&#160;if chosen slice is nothing: [That is, there were no slices remaining]
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[manager refusal]&quot;;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the chosen slice to the player;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;Taken (gingerly).&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7256_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7256_292"></a>To say manager refusal:
            <br>
            &#160;&#160;&#160;&#160;say &quot;[one of]'Hey!' barks a hitherto-unseen manager from behind you. 'It's an 'all you can eat' buffet, not an 'all you can stuff down your pants' buffet.'[or]You are conscious of a disapproving huff from the manager, so you refrain.[stopping]&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <p>That's fine for the case where the player is taking a new slice of pizza explicitly, but we need to handle it a little differently if the taking action is generated in response to EAT PIZZA. In that case, we need to take the slice and also change the identity of the noun, because after the implicit take action happens, the game will test whether the player is holding the noun before attempting to eat it. So we need to refocus its attention:</p>
            <!--START CODE "c7257_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7257_292"></a>Rule for implicitly taking the pizza selection:
            <br>
            &#160;&#160;&#160;&#160;let chosen slice be a random pizza slice in Pizza Limbo;
            <br>
            &#160;&#160;&#160;&#160;if chosen slice is nothing: [That is, there were no slices remaining]
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[manager refusal]&quot;;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the chosen slice to the player;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(helping yourself from the selection)&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the noun is the chosen slice.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>And finally, a bit of touch-up:</p>
            <!--START CODE "c7258_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7258_292"></a>Rule for clarifying the parser's choice of the pizza selection while taking:
            <br>
            &#160;&#160;&#160;&#160;say &quot;(from the magnificent selection before you)[line break]&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <p>For tidiness, we should probably also return the consumed pizza slices to Pizza Limbo so that they can be re-used later:</p>
            <!--START CODE "c7259_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7259_292"></a>After eating a pizza slice:
            <br>
            &#160;&#160;&#160;&#160;move the noun to Pizza Limbo;
            <br>
            &#160;&#160;&#160;&#160;continue the action.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7260_292"-->
            <blockquote class="code"><p class="quoted"><a id="c7260_292"></a>Test me with &quot;i / get pizza / g / i / get pizza / drop pizza / look / get pizza / g / look / eat pizza / g / g / g / g / get pizza / g / g / g / g / g / g / g / g / g / g / g / g / i / eat pizza / take pizza / g&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <!--START EXAMPLE "379: Lollipop Guild" "e227"-->
        <a id="e227"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example227'); return false;"><b>379</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example227'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lollipop Guild</span></b></a><br>
                    Overriding the rules to allow the player to show something to another character without first taking it.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc36.html#e227"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example227" style="display: none;">
            <p>As mentioned in this section, the &quot;implicitly taking&quot; activity does not allow us to skip an implicit take entirely. In order to do this, we need to borrow from the chapter on Rulebooks and tell Inform that one of the rules normally built in to the Standard Rules does nothing in certain circumstances:</p>
            <!--START CODE "c7261_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7261_227"></a><a href="javascript:pasteCode('  [=0x0022=]Lollipop Guild[=0x0022=][=0x000A=][=0x000A=]The carrying requirements rule does nothing when showing something to the guardian.[=0x000A=]The can[=0x0027=]t show what you haven[=0x0027=]t got rule does nothing when showing something to the guardian.[=0x000A=]The block showing rule does nothing.[=0x000A=][=0x000A=]Candyland is a room. [=0x0022=]A fizzing, popping wonderland of sugary delights. A path tiled with butterscotch sweets leads to the horizon.[=0x0022=][=0x000A=][=0x000A=]The butterscotch path is scenery in Candyland.[=0x000A=][=0x000A=]The player carries a basket. In the basket are a licorice gumdrop and a can of tuna. The gumdrop is edible. The description of the gumdrop is [=0x0022=]Covered all over with grains of sugar.[=0x0022=] The can of tuna is edible. The description of the can of tuna is [=0x0022=]A rare import in this place.[=0x0022=][=0x000A=][=0x000A=]The giant lollipop is a fixed in place edible thing in Candyland. [=0x0022=]Growing right next to the path, on a trunk of white paper, is a giant lollipop colored green and red and white.[=0x0022=] The description of the lollipop is [=0x0022=]If you were very blind, like Aunt Myrtle, you might mistake it for a young sapling just planted: the lollipop is just that leafy shade of green, with swirls of white and red that might be branches or flowers.[=0x0022=][=0x000A=][=0x000A=]The guardian is a man in Candyland. [=0x0022=]Right beside you is a guardian in a mint-colored uniform.[=0x0022=] The description of the guardian is [=0x0022=]A killjoy wielding a gigantic toothbrush.[=0x0022=] The guardian carries a gigantic toothbrush. The description of the toothbrush is [=0x0022=]Bristles as long as your hand. Firm bristles, too, not those soft ones. The guardian doesn[=0x0027=]t care about your tender gums.[=0x0022=][=0x000A=][=0x000A=]A thing can be sweet. The butterscotch path, the lollipop, and the gumdrop are sweet.[=0x000A=][=0x000A=]Carry out showing a sweet thing to the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian shrieks! You don[=0x0027=]t understand its language, but from its ululations you understand the idea of decay. There may have been a bit in there about a root canal.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out showing something to the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian nods approvingly at the unsweetened [noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Report eating a sweet thing in the presence of the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian looks mournful, but unholsters his tube of paste and begins applying it to the toothbrush, as though to say that he really did not want to have to do this...[=0x0022=];[=0x000A=][=0x0009=]end the story saying [=0x0022=]Everything goes minty[=0x0022=] instead.[=0x000A=][=0x000A=]Report eating something:[=0x000A=][=0x0009=]say [=0x0022=]You consume [the noun] with gusto.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]x guardian / x toothbrush / show gumdrop to guardian / show path to guardian / show tuna to guardian / look  / eat gumdrop[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('  [=0x0022=]Lollipop Guild[=0x0022=][=0x000A=][=0x000A=]The carrying requirements rule does nothing when showing something to the guardian.[=0x000A=]The can[=0x0027=]t show what you haven[=0x0027=]t got rule does nothing when showing something to the guardian.[=0x000A=]The block showing rule does nothing.[=0x000A=][=0x000A=]Candyland is a room. [=0x0022=]A fizzing, popping wonderland of sugary delights. A path tiled with butterscotch sweets leads to the horizon.[=0x0022=][=0x000A=][=0x000A=]The butterscotch path is scenery in Candyland.[=0x000A=][=0x000A=]The player carries a basket. In the basket are a licorice gumdrop and a can of tuna. The gumdrop is edible. The description of the gumdrop is [=0x0022=]Covered all over with grains of sugar.[=0x0022=] The can of tuna is edible. The description of the can of tuna is [=0x0022=]A rare import in this place.[=0x0022=][=0x000A=][=0x000A=]The giant lollipop is a fixed in place edible thing in Candyland. [=0x0022=]Growing right next to the path, on a trunk of white paper, is a giant lollipop colored green and red and white.[=0x0022=] The description of the lollipop is [=0x0022=]If you were very blind, like Aunt Myrtle, you might mistake it for a young sapling just planted: the lollipop is just that leafy shade of green, with swirls of white and red that might be branches or flowers.[=0x0022=][=0x000A=][=0x000A=]The guardian is a man in Candyland. [=0x0022=]Right beside you is a guardian in a mint-colored uniform.[=0x0022=] The description of the guardian is [=0x0022=]A killjoy wielding a gigantic toothbrush.[=0x0022=] The guardian carries a gigantic toothbrush. The description of the toothbrush is [=0x0022=]Bristles as long as your hand. Firm bristles, too, not those soft ones. The guardian doesn[=0x0027=]t care about your tender gums.[=0x0022=][=0x000A=][=0x000A=]A thing can be sweet. The butterscotch path, the lollipop, and the gumdrop are sweet.[=0x000A=][=0x000A=]Carry out showing a sweet thing to the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian shrieks! You don[=0x0027=]t understand its language, but from its ululations you understand the idea of decay. There may have been a bit in there about a root canal.[=0x0022=] instead.[=0x000A=][=0x000A=]Carry out showing something to the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian nods approvingly at the unsweetened [noun].[=0x0022=] instead.[=0x000A=][=0x000A=]Report eating a sweet thing in the presence of the guardian:[=0x000A=][=0x0009=]say [=0x0022=]The guardian looks mournful, but unholsters his tube of paste and begins applying it to the toothbrush, as though to say that he really did not want to have to do this...[=0x0022=];[=0x000A=][=0x0009=]end the story saying [=0x0022=]Everything goes minty[=0x0022=] instead.[=0x000A=][=0x000A=]Report eating something:[=0x000A=][=0x0009=]say [=0x0022=]You consume [the noun] with gusto.[=0x0022=] instead.[=0x000A=][=0x000A=]Test me with [=0x0022=]x guardian / x toothbrush / show gumdrop to guardian / show path to guardian / show tuna to guardian / look  / eat gumdrop[=0x0022=].[=0x000A=][=0x000A=][=0x000A=]\n', 'Example - Lollipop Guild')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp;   &quot;Lollipop Guild&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7262_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7262_227"></a>The carrying requirements rule does nothing when showing something to the guardian.
            <br>
            The can't show what you haven't got rule does nothing when showing something to the guardian.
            <br>
            The block showing rule does nothing.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7263_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7263_227"></a>Candyland is a room. &quot;A fizzing, popping wonderland of sugary delights. A path tiled with butterscotch sweets leads to the horizon.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7264_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7264_227"></a>The butterscotch path is scenery in Candyland.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7265_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7265_227"></a>The player carries a basket. In the basket are a licorice gumdrop and a can of tuna. The gumdrop is edible. The description of the gumdrop is &quot;Covered all over with grains of sugar.&quot; The can of tuna is edible. The description of the can of tuna is &quot;A rare import in this place.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7266_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7266_227"></a>The giant lollipop is a fixed in place edible thing in Candyland. &quot;Growing right next to the path, on a trunk of white paper, is a giant lollipop colored green and red and white.&quot; The description of the lollipop is &quot;If you were very blind, like Aunt Myrtle, you might mistake it for a young sapling just planted: the lollipop is just that leafy shade of green, with swirls of white and red that might be branches or flowers.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7267_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7267_227"></a>The guardian is a man in Candyland. &quot;Right beside you is a guardian in a mint-colored uniform.&quot; The description of the guardian is &quot;A killjoy wielding a gigantic toothbrush.&quot; The guardian carries a gigantic toothbrush. The description of the toothbrush is &quot;Bristles as long as your hand. Firm bristles, too, not those soft ones. The guardian doesn't care about your tender gums.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7268_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7268_227"></a>A thing can be sweet. The butterscotch path, the lollipop, and the gumdrop are sweet.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7269_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7269_227"></a>Carry out showing a sweet thing to the guardian:
            <br>
            &#160;&#160;&#160;&#160;say &quot;The guardian shrieks! You don't understand its language, but from its ululations you understand the idea of decay. There may have been a bit in there about a root canal.&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7270_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7270_227"></a>Carry out showing something to the guardian:
            <br>
            &#160;&#160;&#160;&#160;say &quot;The guardian nods approvingly at the unsweetened [noun].&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7271_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7271_227"></a>Report eating a sweet thing in the presence of the guardian:
            <br>
            &#160;&#160;&#160;&#160;say &quot;The guardian looks mournful, but unholsters his tube of paste and begins applying it to the toothbrush, as though to say that he really did not want to have to do this...&quot;;
            <br>
            &#160;&#160;&#160;&#160;end the story saying &quot;Everything goes minty&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7272_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7272_227"></a>Report eating something:
            <br>
            &#160;&#160;&#160;&#160;say &quot;You consume [the noun] with gusto.&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7273_227"-->
            <blockquote class="code"><p class="quoted"><a id="c7273_227"></a>Test me with &quot;x guardian / x toothbrush / show gumdrop to guardian / show path to guardian / show tuna to guardian / look  / eat gumdrop&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Note that because we only deactivate the carrying requirements rule for showing purposes, the player still takes the gumdrop before eating it.</p>
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <hr>
    </div>
    <!--START IGNORE-->
    <div class="bookfooter">
        <table class="fullwidth">
            <tr>
                <td class="footerprevious">
                    <a href="doc317.html" class="footerlink">Previous</a>
                </td>
                <td class="footercontents">
                    <a href="index.html" class="footerlink">Contents</a>
                </td>
                <td class="footernext">
                    <a href="doc319.html" class="footerlink">Next</a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
</body>
</html>
