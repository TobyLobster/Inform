<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="indoc_WI.css" rel="stylesheet" type="text/css">
    <!--Generated by indoc-->
    <title>15.8. Units</title>
    <script type="text/javascript">
            function showExtra(id, imid) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                    document.getElementById(imid).src = 'inform:/doc_images/extra.png';
                } else {
                    document.getElementById(id).style.display = 'block';
                    document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
                }
            }
            function onLoaded() {
                if (window.location.hash) {
                    var hash = window.location.hash.substring(2);
                    if (hash.search("_") >= 0) {
                        var res = hash.split("_");
                        showExample("example"+res[1]);
                    } else {
                        showExample("example"+hash);
                    }
                }
            }
            window.onload=onLoaded;
            function showExample(id) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                } else {
                    document.getElementById(id).style.display = 'block';
                }
            }
            function openExtra(id, imid) {
                document.getElementById(id).style.display = 'block';
                document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
            }
            function closeExtra(id, imid) {
                document.getElementById(id).style.display = 'none';
                document.getElementById(imid).src = 'inform:/doc_images/extra.png';
            }
    </script>
</head>
<body class="paper papertint">
    <script type="text/javascript">
        function pasteCode(code) {
            var myProject = window.Project;

            myProject.selectView('source');
            myProject.pasteCode(code);
        }
    </script>
    <script type="text/javascript">
        function createNewProject(code, title) {
            var myProject = window.Project;

            myProject.createNewProject(title, code);
        }
    </script>

    <!--SEARCH TITLE "Units"-->
    <!--SEARCH SECTION "15.8"-->
    <!--SEARCH SORT "000-015-008-000"-->
    <!--START IGNORE 230-->
    <div class="bookheader">
        <table class="fullwidth midnightblack">
            <tr>
                <td class="midnightbannerleftcell">
                    <a href="doc230.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft"></a>
                </td>
                <td class="midnightbannercentrecell">
                    <a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 15: Numbers and Equations</span></a>
                </td>
                <td class="midnightbannerrightcell">
                    <a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup"></a><a href="doc232.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright"></a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
    <p class="sectionheading">§15.8. Units</p>
    <p>Suppose we want to talk about how tall people are. We could just create a &quot;number&quot; property, like this:</p>
    <!--START CODE "c4573"-->
    <blockquote class="code"><p class="quoted"><a id="c4573"></a>A person has a number called height.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>But then we would have to write lines like &quot;Isabella has height 68&quot;, which nobody would naturally say. What we want is to be able to write &quot;Isabella is 5 foot 8.&quot; Perhaps the computer will need to store that measurement as the number 68 in some register or other, but we don't want to know about that.</p>
    <p>&quot;5 foot 8&quot; is a complicated notation in a way - it involves both feet and inches - so let's start with a simpler example:</p>
    <!--START CODE "c4574"-->
    <blockquote class="code"><p class="quoted"><a id="c4574"></a>A weight is a kind of value. 10kg specifies a weight.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>This is a little different to the kinds of value seen so far, which were all created like so:</p>
    <!--START CODE "c4575"-->
    <blockquote class="code"><p class="quoted"><a id="c4575"></a>A colour is a kind of value. The colours are red, green and blue.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>We can't mix the two styles: a new kind of value will either be numerical at heart (&quot;10kg&quot;) or verbal at heart (&quot;blue&quot;).</p>
    <p>The effect of &quot;10kg specifies a weight&quot; is to tell Inform that this is the notation for writing a constant &quot;weight&quot;. So, for instance,</p>
    <!--START CODE "c4576"-->
    <blockquote class="code"><p class="quoted"><a id="c4576"></a>The maximum load is a weight that varies. The maximum load is 8000kg.
    </p>
    </blockquote>
    <!--END CODE-->
    <!--START CODE "c4577"-->
    <blockquote class="code"><p class="quoted"><a id="c4577"></a>if the maximum load is greater than 8000kg, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Inform is then careful not to allow weights to be mixed up with other numerical values. For instance, it won't allow &quot;if the maximum load is 400&quot;, because 400 is a number, not a weight.</p>
    <p>More or less anything we can do with numbers, we can now do with weights. For instance, we can write:</p>
    <!--START CODE "c4578"-->
    <blockquote class="code"><p class="quoted"><a id="c4578"></a>The Weighbridge is a room. &quot;A sign declares that the maximum load is [maximum load].&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>...which will produce the text &quot;A sign declares that the maximum load is 8000kg.&quot;</p>
    <p>Numerical kinds of value are sometimes called &quot;units&quot;, because one of their main uses is to allow us to write quantities using scientific units such as kilograms. But they have other uses too. We have a great deal of freedom in creating notations like &quot;10kg&quot;, or &quot;4 foot 10&quot; - the main thing is that new notations must not already mean a value. So &quot;10 specifies a weight&quot; will not be allowed, because 10 specifies a number already.</p>
    <p><span class="boldface">By default we can only write whole-number values.</span> As we've seen, Inform can handle both integer (whole-number) and real arithmetic, and they each have their advantages. The default here is to use whole numbers, so</p>
    <!--START CODE "c4579"-->
    <blockquote class="code"><p class="quoted"><a id="c4579"></a>10 kg specifies a weight.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>will store only whole numbers of kilograms (unless clever scaling tricks are used: see the next section). That may be fine, but if we need to handle a wider range of weights, or do scientific calculations that need to be more accurate, this is better:</p>
    <!--START CODE "c4580"-->
    <blockquote class="code"><p class="quoted"><a id="c4580"></a>1.0 kg specifies a weight.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Here Inform can see from the &quot;.0&quot; in the prototype number that real numbers will be involved. (It needs to be &quot;.0&quot; not, say, &quot;.5&quot; because that could be read as a different sort of notation.) We can still write &quot;8000kg&quot;, but we can now also write &quot;1.9885 x 10^30 kg&quot; (the mass of the Sun) or &quot;9.109383 x 10^−31 kg&quot; (the mass of an electron). On the other hand, any calculations we do will be limited in accuracy to about 6 to 9 decimal places, exactly as for real numbers.</p>
    <p><span class="boldface">By default we can only write positive values when whole numbers are used.</span> Sometimes it is unnatural to write negative values, and so Inform will issue a Problem message if this is tried - for instance, Inform would not allow us to write a weight of -4 kg. (This doesn't mean that arithmetic on units is forbidden to get a negative result: we may want to work out the difference between two weights. Inform's Problem message is simply to try to prevent the accidental writing of incorrect values.) If we do want the ability to write negative values in the source text, we signal that in the notation itself:</p>
    <!--START CODE "c4581"-->
    <blockquote class="code"><p class="quoted"><a id="c4581"></a>-10 kg specifies a weight.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>That alerts Inform that both positive and negative values for this unit make sense.</p>
    <p>If we set up a spread of multiple notations (see the next section) then this is automatically enabled, because then we're clearly dealing with proper physics, where negative values are common; and similarly if we use real numbers (as above).</p>
    <hr>
    <div class="bookexamples">
        <p class="chapterheading"></p>
        <!--START EXAMPLE "254: rBGH" "e303"-->
        <a id="e303"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example303'); return false;"><b>254</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example303'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">rBGH</span></b></a><br>
                    The player character's height is selected randomly at the start of play.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc23.html#e303"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example303" style="display: none;">
            <p>As with ordinary numbers, we can choose random units when this is useful:</p>
            <!--START CODE "c4582_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4582_303"></a><a href="javascript:pasteCode('[=0x0022=]rBGH[=0x0022=][=0x000A=][=0x000A=]The Pharmaceutical Testing Facility is a room. [=0x0022=]A [if the player is short]large [end if][if the player is tall]cramped [end if]white space with sterile counters and a[if the player is tall]n uncomfortable little[end if] stool. There is also a mirror, behind which someone must be watching you. But you can[=0x0027=]t see through to that.[=0x0022=][=0x000A=][=0x000A=]A counter, a one-way mirror, and a stool are scenery in the Facility. The stool is an enterable supporter. The counter supports a plate.[=0x000A=][=0x000A=]Height is a kind of value. 5 feet 11 inches specifies a height. 5[=0x0027=]11 specifies a height. A person has a height.[=0x000A=][=0x000A=]Definition: a person is tall if its height is 6 feet 0 inches or more.[=0x000A=][=0x000A=]Definition: a person is short if its height is 5 feet 4 inches or less.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the height of the player is a random height between 5 feet 2 inches and 6 feet 4 inches;[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=][height of player][=0x0022=].[=0x000A=][=0x000A=]Instead of examining the player:[=0x000A=][=0x0009=]say [=0x0022=]You, Test Subject, are [height of the player] tall.[=0x0022=][=0x000A=][=0x000A=]The growth pill is a kind of thing. A growth pill is always edible. The description is usually [=0x0022=]It is leaf-green and has a reassuring logo of a curling vine on the side. Nothing to worry about, nothing at all.[=0x0022=] Two growth pills are on the plate.[=0x000A=][=0x000A=]After eating the growth pill:[=0x000A=][=0x0009=]increase the height of the player by 0 feet 6 inches;[=0x000A=][=0x0009=]say [=0x0022=]Your spine does something frightening and painful, and you find yourself looking down on the room from a wholly new angle.[=0x0022=];[=0x000A=][=0x0009=]try looking.[=0x000A=][=0x000A=]Test me with [=0x0022=]examine me / eat pill / examine me / eat pill / examine me[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]rBGH[=0x0022=][=0x000A=][=0x000A=]The Pharmaceutical Testing Facility is a room. [=0x0022=]A [if the player is short]large [end if][if the player is tall]cramped [end if]white space with sterile counters and a[if the player is tall]n uncomfortable little[end if] stool. There is also a mirror, behind which someone must be watching you. But you can[=0x0027=]t see through to that.[=0x0022=][=0x000A=][=0x000A=]A counter, a one-way mirror, and a stool are scenery in the Facility. The stool is an enterable supporter. The counter supports a plate.[=0x000A=][=0x000A=]Height is a kind of value. 5 feet 11 inches specifies a height. 5[=0x0027=]11 specifies a height. A person has a height.[=0x000A=][=0x000A=]Definition: a person is tall if its height is 6 feet 0 inches or more.[=0x000A=][=0x000A=]Definition: a person is short if its height is 5 feet 4 inches or less.[=0x000A=][=0x000A=]When play begins:[=0x000A=][=0x0009=]now the height of the player is a random height between 5 feet 2 inches and 6 feet 4 inches;[=0x000A=][=0x0009=]now the right hand status line is [=0x0022=][height of player][=0x0022=].[=0x000A=][=0x000A=]Instead of examining the player:[=0x000A=][=0x0009=]say [=0x0022=]You, Test Subject, are [height of the player] tall.[=0x0022=][=0x000A=][=0x000A=]The growth pill is a kind of thing. A growth pill is always edible. The description is usually [=0x0022=]It is leaf-green and has a reassuring logo of a curling vine on the side. Nothing to worry about, nothing at all.[=0x0022=] Two growth pills are on the plate.[=0x000A=][=0x000A=]After eating the growth pill:[=0x000A=][=0x0009=]increase the height of the player by 0 feet 6 inches;[=0x000A=][=0x0009=]say [=0x0022=]Your spine does something frightening and painful, and you find yourself looking down on the room from a wholly new angle.[=0x0022=];[=0x000A=][=0x0009=]try looking.[=0x000A=][=0x000A=]Test me with [=0x0022=]examine me / eat pill / examine me / eat pill / examine me[=0x0022=].[=0x000A=]\n', 'Example - rBGH')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;rBGH&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4583_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4583_303"></a>The Pharmaceutical Testing Facility is a room. &quot;A [if the player is short]large [end if][if the player is tall]cramped [end if]white space with sterile counters and a[if the player is tall]n uncomfortable little[end if] stool. There is also a mirror, behind which someone must be watching you. But you can't see through to that.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4584_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4584_303"></a>A counter, a one-way mirror, and a stool are scenery in the Facility. The stool is an enterable supporter. The counter supports a plate.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4585_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4585_303"></a>Height is a kind of value. 5 feet 11 inches specifies a height. 5'11 specifies a height. A person has a height.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4586_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4586_303"></a>Definition: a person is tall if its height is 6 feet 0 inches or more.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4587_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4587_303"></a>Definition: a person is short if its height is 5 feet 4 inches or less.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4588_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4588_303"></a>When play begins:
            <br>
            &#160;&#160;&#160;&#160;now the height of the player is a random height between 5 feet 2 inches and 6 feet 4 inches;
            <br>
            &#160;&#160;&#160;&#160;now the right hand status line is &quot;[height of player]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4589_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4589_303"></a>Instead of examining the player:
            <br>
            &#160;&#160;&#160;&#160;say &quot;You, Test Subject, are [height of the player] tall.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4590_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4590_303"></a>The growth pill is a kind of thing. A growth pill is always edible. The description is usually &quot;It is leaf-green and has a reassuring logo of a curling vine on the side. Nothing to worry about, nothing at all.&quot; Two growth pills are on the plate.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4591_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4591_303"></a>After eating the growth pill:
            <br>
            &#160;&#160;&#160;&#160;increase the height of the player by 0 feet 6 inches;
            <br>
            &#160;&#160;&#160;&#160;say &quot;Your spine does something frightening and painful, and you find yourself looking down on the room from a wholly new angle.&quot;;
            <br>
            &#160;&#160;&#160;&#160;try looking.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4592_303"-->
            <blockquote class="code"><p class="quoted"><a id="c4592_303"></a>Test me with &quot;examine me / eat pill / examine me / eat pill / examine me&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <!--START EXAMPLE "255: Lethal Concentration 1" "e210"-->
        <a id="e210"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example210'); return false;"><b>255</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example210'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lethal Concentration 1</span></b></a><br>
                    A poisonous gas that spreads from room to room, incapacitating or killing the player when it reaches sufficient levels.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc80.html#e210"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example210" style="display: none;">
            <!--START CODE "c4593_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4593_210"></a><a href="javascript:pasteCode('[=0x0022=]Lethal Concentration[=0x0022=][=0x000A=][=0x000A=]A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.[=0x000A=][=0x000A=]A room has a concentration called current concentration. A room has a concentration called former concentration.[=0x000A=][=0x000A=]Probability inverse is a number that varies. [This is expressed as an inverse of the actual probability of diffusion from one room to another, to avoid error.] Probability inverse is 20. [That is, any given molecule of gas has a 5% chance of leaving by a given doorway at any given minute. Probability inverse should never drop below 10, the maximum number of exits from the room.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]follow the diffusion rules.[=0x000A=][=0x000A=]The diffusion rules are a rulebook.[=0x000A=][=0x000A=]A diffusion rule (this is the gas movement rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]let sum be 0.0 ppm;[=0x000A=][=0x0009=][=0x0009=]repeat with way running through directions:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let second space be the room way from the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if second space is a room:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let difference be the former concentration of the second space minus the former concentration of the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]increase sum by the difference;[=0x000A=][=0x0009=][=0x0009=]let sum be sum divided by probability inverse;[=0x000A=][=0x0009=][=0x0009=]now current concentration of the space is the former concentration of the space plus the sum.[=0x000A=][=0x000A=][A technical note: it would be possible to write [=0x0022=]repeat with space running through rooms... repeat with second space running through rooms adjacent to the space[=0x0022=] instead, but in practice this loops through all the rooms * all the rooms again * all the directions (to determine adjacency). Phrasing the loop this way omits the second multiplier. For a map of 25 rooms, this means that the loop runs 25 times faster than it would otherwise, and of course for a larger map the effect would be even more dramatic.][=0x000A=][=0x000A=]A diffusion rule (this is the resetting concentration rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]now the former concentration of the space is the current concentration of the space.[=0x000A=][=0x000A=]The last diffusion rule (this is the lethal dosage rule):[=0x000A=][=0x0009=]if the current concentration of the location is greater than LC50:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The concentration in the air overpowers you...[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]if the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You feel extremely uncomfortable in this environment.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something when the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=]if going, continue the action;[=0x000A=][=0x0009=]say [=0x0022=]You can[=0x0027=]t work in this environment: your eyes and nose sting and it hurts to breathe.[=0x0022=][=0x000A=][=0x000A=][And, for testing purposes, a square grid of rooms:][=0x000A=][=0x000A=]Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is south of room 1A and west of Room 2B. Room 2B is west of Room 2C and south of Room 1B. Room 2C is west of Room 2D and south of Room 1C. Room 2D is west of Room 2E and south of Room 1D. Room 2E is south of Room 1E.[=0x000A=][=0x000A=]Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C and south of Room 2B. Room 3C is west of Room 3D and south of Room 2C. Room 3D is west of Room 3E and south of Room 2D. Room 3E is south of Room 2E.[=0x000A=][=0x000A=]Room 4A is south of room 3A and west of Room 4B. Room 4B is west of Room 4C and south of Room 3B. Room 4C is west of Room 4D and south of Room 3C. Room 4D is west of Room 4E and south of Room 3D. Room 4E is south of Room 3E.[=0x000A=][=0x000A=]Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.[=0x000A=][=0x000A=]The former concentration of room 3C is 800.0 ppm.[=0x000A=][=0x000A=][For variety of testing, here is another room set-up, this time with some corridors and walls within; uncommenting it, and commenting out the connected grid, will let us explore what would happen in alternative cases, to prove to ourselves that the model works consistently.][=0x000A=][=0x000A=][Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is west of Room 2B. Room 2B is west of Room 2C. Room 2C is west of Room 2D. Room 2D is west of Room 2E. Room 2E is south of Room 1E.[=0x000A=][=0x000A=]Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C. Room 3C is west of Room 3D. Room 3D is west of Room 3E.[=0x000A=][=0x000A=]Room 4A is west of Room 4B. Room 4B is west of Room 4C. Room 4C is west of Room 4D. Room 4D is west of Room 4E. Room 4E is south of Room 3E.[=0x000A=][=0x000A=]Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.][=0x000A=][=0x000A=][For the sake at least of seeing what[=0x0027=]s going on in the example, let[=0x0027=]s also provide the player with the means to view the gas diffusion graphically:][=0x000A=][=0x000A=]The status grid is a device carried by the player. The status grid is switched on.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]try examining the grid.[=0x000A=][=0x000A=]Instead of examining the status grid:[=0x000A=][=0x0009=]say [=0x0022=][fixed letter spacing][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 1A]|[state of room 1B]|[state of room 1C]|[state of room 1D]|[state of room 1E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 2A]|[state of room 2B]|[state of room 2C]|[state of room 2D]|[state of room 2E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 3A]|[state of room 3B]|[state of room 3C]|[state of room 3D]|[state of room 3E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 4A]|[state of room 4B]|[state of room 4C]|[state of room 4D]|[state of room 4E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 5A]|[state of room 5B]|[state of room 5C]|[state of room 5D]|[state of room 5E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][variable letter spacing][line break][=0x0022=].[=0x000A=][=0x000A=]To say bar:[=0x000A=][=0x0009=]say [=0x0022=]----------------------------------------------[=0x0022=].[=0x000A=][=0x000A=]TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.][=0x000A=][=0x000A=]TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.][=0x000A=][=0x000A=]TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.][=0x000A=][=0x000A=]LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player[=0x0027=]s weight for one minute.][=0x000A=][=0x000A=][The values set for these would depend on the type of poisonous gas in question; we[=0x0027=]d want to adjust appropriately.][=0x000A=][=0x000A=]To say state of (space - a room):[=0x000A=][=0x0009=]if the space is the location, say bold type;[=0x000A=][=0x0009=]if current concentration of space is less than 10.0ppm, say [=0x0022=] [=0x0022=];[=0x000A=][=0x0009=]if current concentration of space is less than 100.0ppm, say [=0x0022=] [=0x0022=];[=0x000A=][=0x0009=]say current concentration of space;[=0x000A=][=0x0009=]say roman type.[=0x000A=][=0x000A=][Now, in theory we might also want to account for sources and sinks, items that either inject poisonous gas into the environment or remove it again. For simplicity, we will assume that these contributions can also be calculated in ppm and that the total number of inert and poisonous gas molecules in a room never changes (so if poison gas molecules are added, an equal number of inert molecules are removed). If room pressure were able to change, our model would have to be improved, so let us assume for now that that never happens. We want this sink/source business to calculate before any other portion of the diffusion rulebook, so set it as a first diffusion rule.][=0x000A=][=0x000A=]A gas source is a kind of thing. A gas source has a concentration called the contribution. The contribution of a gas source is usually 30.0ppm.[=0x000A=][=0x000A=]Room 2B contains a gas source called a spigot. The contribution of the spigot is 50.0ppm. Room 5A contains a gas source.[=0x000A=][=0x000A=]A gas sink is a kind of thing. A gas sink has a concentration called the contribution. The contribution of a gas sink is usually 30.0ppm.[=0x000A=][=0x000A=]Room 5E contains a gas sink called a fan. The contribution of the fan is 80.0ppm.[=0x000A=][=0x000A=]The first diffusion rule (this is the sources and sinks rule):[=0x000A=][=0x0009=]follow the sources rule;[=0x000A=][=0x0009=]follow the sinks rule.[=0x000A=][=0x000A=]This is the sinks rule:[=0x000A=][=0x0009=]repeat with item running through gas sinks:[=0x000A=][=0x0009=][=0x0009=]let space be the location of the item;[=0x000A=][=0x0009=][=0x0009=]decrease the former concentration of the space by the contribution of the item;[=0x000A=][=0x0009=][=0x0009=]if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.[=0x000A=][=0x000A=]This is the sources rule:[=0x000A=][=0x0009=]repeat with second item running through gas sources:[=0x000A=][=0x0009=][=0x0009=]let space be the location of the second item;[=0x000A=][=0x0009=][=0x0009=]increase the former concentration of the space by the contribution of the second item;[=0x000A=][=0x0009=][=0x0009=]if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / z / z / z / z / z[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]Lethal Concentration[=0x0022=][=0x000A=][=0x000A=]A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.[=0x000A=][=0x000A=]A room has a concentration called current concentration. A room has a concentration called former concentration.[=0x000A=][=0x000A=]Probability inverse is a number that varies. [This is expressed as an inverse of the actual probability of diffusion from one room to another, to avoid error.] Probability inverse is 20. [That is, any given molecule of gas has a 5% chance of leaving by a given doorway at any given minute. Probability inverse should never drop below 10, the maximum number of exits from the room.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]follow the diffusion rules.[=0x000A=][=0x000A=]The diffusion rules are a rulebook.[=0x000A=][=0x000A=]A diffusion rule (this is the gas movement rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]let sum be 0.0 ppm;[=0x000A=][=0x0009=][=0x0009=]repeat with way running through directions:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let second space be the room way from the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if second space is a room:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let difference be the former concentration of the second space minus the former concentration of the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]increase sum by the difference;[=0x000A=][=0x0009=][=0x0009=]let sum be sum divided by probability inverse;[=0x000A=][=0x0009=][=0x0009=]now current concentration of the space is the former concentration of the space plus the sum.[=0x000A=][=0x000A=][A technical note: it would be possible to write [=0x0022=]repeat with space running through rooms... repeat with second space running through rooms adjacent to the space[=0x0022=] instead, but in practice this loops through all the rooms * all the rooms again * all the directions (to determine adjacency). Phrasing the loop this way omits the second multiplier. For a map of 25 rooms, this means that the loop runs 25 times faster than it would otherwise, and of course for a larger map the effect would be even more dramatic.][=0x000A=][=0x000A=]A diffusion rule (this is the resetting concentration rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]now the former concentration of the space is the current concentration of the space.[=0x000A=][=0x000A=]The last diffusion rule (this is the lethal dosage rule):[=0x000A=][=0x0009=]if the current concentration of the location is greater than LC50:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The concentration in the air overpowers you...[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]if the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You feel extremely uncomfortable in this environment.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something when the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=]if going, continue the action;[=0x000A=][=0x0009=]say [=0x0022=]You can[=0x0027=]t work in this environment: your eyes and nose sting and it hurts to breathe.[=0x0022=][=0x000A=][=0x000A=][And, for testing purposes, a square grid of rooms:][=0x000A=][=0x000A=]Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is south of room 1A and west of Room 2B. Room 2B is west of Room 2C and south of Room 1B. Room 2C is west of Room 2D and south of Room 1C. Room 2D is west of Room 2E and south of Room 1D. Room 2E is south of Room 1E.[=0x000A=][=0x000A=]Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C and south of Room 2B. Room 3C is west of Room 3D and south of Room 2C. Room 3D is west of Room 3E and south of Room 2D. Room 3E is south of Room 2E.[=0x000A=][=0x000A=]Room 4A is south of room 3A and west of Room 4B. Room 4B is west of Room 4C and south of Room 3B. Room 4C is west of Room 4D and south of Room 3C. Room 4D is west of Room 4E and south of Room 3D. Room 4E is south of Room 3E.[=0x000A=][=0x000A=]Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.[=0x000A=][=0x000A=]The former concentration of room 3C is 800.0 ppm.[=0x000A=][=0x000A=][For variety of testing, here is another room set-up, this time with some corridors and walls within; uncommenting it, and commenting out the connected grid, will let us explore what would happen in alternative cases, to prove to ourselves that the model works consistently.][=0x000A=][=0x000A=][Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is west of Room 2B. Room 2B is west of Room 2C. Room 2C is west of Room 2D. Room 2D is west of Room 2E. Room 2E is south of Room 1E.[=0x000A=][=0x000A=]Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C. Room 3C is west of Room 3D. Room 3D is west of Room 3E.[=0x000A=][=0x000A=]Room 4A is west of Room 4B. Room 4B is west of Room 4C. Room 4C is west of Room 4D. Room 4D is west of Room 4E. Room 4E is south of Room 3E.[=0x000A=][=0x000A=]Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.][=0x000A=][=0x000A=][For the sake at least of seeing what[=0x0027=]s going on in the example, let[=0x0027=]s also provide the player with the means to view the gas diffusion graphically:][=0x000A=][=0x000A=]The status grid is a device carried by the player. The status grid is switched on.[=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]try examining the grid.[=0x000A=][=0x000A=]Instead of examining the status grid:[=0x000A=][=0x0009=]say [=0x0022=][fixed letter spacing][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 1A]|[state of room 1B]|[state of room 1C]|[state of room 1D]|[state of room 1E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 2A]|[state of room 2B]|[state of room 2C]|[state of room 2D]|[state of room 2E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 3A]|[state of room 3B]|[state of room 3C]|[state of room 3D]|[state of room 3E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 4A]|[state of room 4B]|[state of room 4C]|[state of room 4D]|[state of room 4E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=]|[state of room 5A]|[state of room 5B]|[state of room 5C]|[state of room 5D]|[state of room 5E]|[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][bar][variable letter spacing][line break][=0x0022=].[=0x000A=][=0x000A=]To say bar:[=0x000A=][=0x0009=]say [=0x0022=]----------------------------------------------[=0x0022=].[=0x000A=][=0x000A=]TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.][=0x000A=][=0x000A=]TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.][=0x000A=][=0x000A=]TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.][=0x000A=][=0x000A=]LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player[=0x0027=]s weight for one minute.][=0x000A=][=0x000A=][The values set for these would depend on the type of poisonous gas in question; we[=0x0027=]d want to adjust appropriately.][=0x000A=][=0x000A=]To say state of (space - a room):[=0x000A=][=0x0009=]if the space is the location, say bold type;[=0x000A=][=0x0009=]if current concentration of space is less than 10.0ppm, say [=0x0022=] [=0x0022=];[=0x000A=][=0x0009=]if current concentration of space is less than 100.0ppm, say [=0x0022=] [=0x0022=];[=0x000A=][=0x0009=]say current concentration of space;[=0x000A=][=0x0009=]say roman type.[=0x000A=][=0x000A=][Now, in theory we might also want to account for sources and sinks, items that either inject poisonous gas into the environment or remove it again. For simplicity, we will assume that these contributions can also be calculated in ppm and that the total number of inert and poisonous gas molecules in a room never changes (so if poison gas molecules are added, an equal number of inert molecules are removed). If room pressure were able to change, our model would have to be improved, so let us assume for now that that never happens. We want this sink/source business to calculate before any other portion of the diffusion rulebook, so set it as a first diffusion rule.][=0x000A=][=0x000A=]A gas source is a kind of thing. A gas source has a concentration called the contribution. The contribution of a gas source is usually 30.0ppm.[=0x000A=][=0x000A=]Room 2B contains a gas source called a spigot. The contribution of the spigot is 50.0ppm. Room 5A contains a gas source.[=0x000A=][=0x000A=]A gas sink is a kind of thing. A gas sink has a concentration called the contribution. The contribution of a gas sink is usually 30.0ppm.[=0x000A=][=0x000A=]Room 5E contains a gas sink called a fan. The contribution of the fan is 80.0ppm.[=0x000A=][=0x000A=]The first diffusion rule (this is the sources and sinks rule):[=0x000A=][=0x0009=]follow the sources rule;[=0x000A=][=0x0009=]follow the sinks rule.[=0x000A=][=0x000A=]This is the sinks rule:[=0x000A=][=0x0009=]repeat with item running through gas sinks:[=0x000A=][=0x0009=][=0x0009=]let space be the location of the item;[=0x000A=][=0x0009=][=0x0009=]decrease the former concentration of the space by the contribution of the item;[=0x000A=][=0x0009=][=0x0009=]if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.[=0x000A=][=0x000A=]This is the sources rule:[=0x000A=][=0x0009=]repeat with second item running through gas sources:[=0x000A=][=0x0009=][=0x0009=]let space be the location of the second item;[=0x000A=][=0x0009=][=0x0009=]increase the former concentration of the space by the contribution of the second item;[=0x000A=][=0x0009=][=0x0009=]if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / z / z / z / z / z[=0x0022=].[=0x000A=]\n', 'Example - Lethal Concentration 1')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;Lethal Concentration&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4594_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4594_210"></a>A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4595_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4595_210"></a>A room has a concentration called current concentration. A room has a concentration called former concentration.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4596_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4596_210"></a>Probability inverse is a number that varies. [This is expressed as an inverse of the actual probability of diffusion from one room to another, to avoid error.] Probability inverse is 20. [That is, any given molecule of gas has a 5% chance of leaving by a given doorway at any given minute. Probability inverse should never drop below 10, the maximum number of exits from the room.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4597_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4597_210"></a>Every turn:
            <br>
            &#160;&#160;&#160;&#160;follow the diffusion rules.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4598_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4598_210"></a>The diffusion rules are a rulebook.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4599_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4599_210"></a>A diffusion rule (this is the gas movement rule):
            <br>
            &#160;&#160;&#160;&#160;repeat with space running through rooms:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let sum be 0.0 ppm;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with way running through directions:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let second space be the room way from the space;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if second space is a room:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let difference be the former concentration of the second space minus the former concentration of the space;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase sum by the difference;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let sum be sum divided by probability inverse;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current concentration of the space is the former concentration of the space plus the sum.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>A technical note: it would be possible to write &quot;repeat with space running through rooms... repeat with second space running through rooms adjacent to the space&quot; instead, but in practice this loops through all the rooms * all the rooms again * all the directions (to determine adjacency). Phrasing the loop this way omits the second multiplier. For a map of 25 rooms, this means that the loop runs 25 times faster than it would otherwise, and of course for a larger map the effect would be even more dramatic.</p>
            <!--START CODE "c4600_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4600_210"></a>A diffusion rule (this is the resetting concentration rule):
            <br>
            &#160;&#160;&#160;&#160;repeat with space running through rooms:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the former concentration of the space is the current concentration of the space.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4601_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4601_210"></a>The last diffusion rule (this is the lethal dosage rule):
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of the location is greater than LC50:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The concentration in the air overpowers you...&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current concentration of the location is greater than TLV-STEL:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You feel extremely uncomfortable in this environment.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4602_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4602_210"></a>Instead of doing something when the current concentration of the location is greater than TLV-STEL:
            <br>
            &#160;&#160;&#160;&#160;if going, continue the action;
            <br>
            &#160;&#160;&#160;&#160;say &quot;You can't work in this environment: your eyes and nose sting and it hurts to breathe.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <p>And, for testing purposes, a square grid of rooms:</p>
            <!--START CODE "c4603_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4603_210"></a>Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4604_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4604_210"></a>Room 2A is south of room 1A and west of Room 2B. Room 2B is west of Room 2C and south of Room 1B. Room 2C is west of Room 2D and south of Room 1C. Room 2D is west of Room 2E and south of Room 1D. Room 2E is south of Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4605_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4605_210"></a>Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C and south of Room 2B. Room 3C is west of Room 3D and south of Room 2C. Room 3D is west of Room 3E and south of Room 2D. Room 3E is south of Room 2E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4606_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4606_210"></a>Room 4A is south of room 3A and west of Room 4B. Room 4B is west of Room 4C and south of Room 3B. Room 4C is west of Room 4D and south of Room 3C. Room 4D is west of Room 4E and south of Room 3D. Room 4E is south of Room 3E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4607_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4607_210"></a>Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4608_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4608_210"></a>The former concentration of room 3C is 800.0 ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>For variety of testing, here is another room set-up, this time with some corridors and walls within; uncommenting it, and commenting out the connected grid, will let us explore what would happen in alternative cases, to prove to ourselves that the model works consistently.</p>
            <!--START CODE "c4609_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4609_210"></a>[Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4610_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4610_210"></a>Room 2A is west of Room 2B. Room 2B is west of Room 2C. Room 2C is west of Room 2D. Room 2D is west of Room 2E. Room 2E is south of Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4611_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4611_210"></a>Room 3A is south of room 2A and west of Room 3B. Room 3B is west of Room 3C. Room 3C is west of Room 3D. Room 3D is west of Room 3E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4612_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4612_210"></a>Room 4A is west of Room 4B. Room 4B is west of Room 4C. Room 4C is west of Room 4D. Room 4D is west of Room 4E. Room 4E is south of Room 3E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4613_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4613_210"></a>Room 5A is south of room 4A and west of Room 5B. Room 5B is west of Room 5C and south of Room 4B. Room 5C is west of Room 5D and south of Room 4C. Room 5D is west of Room 5E and south of Room 4D. Room 5E is south of Room 4E.]
            </p>
            </blockquote>
            <!--END CODE-->
            <p>For the sake at least of seeing what's going on in the example, let's also provide the player with the means to view the gas diffusion graphically:</p>
            <!--START CODE "c4614_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4614_210"></a>The status grid is a device carried by the player. The status grid is switched on.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4615_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4615_210"></a>Every turn:
            <br>
            &#160;&#160;&#160;&#160;try examining the grid.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4616_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4616_210"></a>Instead of examining the status grid:
            <br>
            &#160;&#160;&#160;&#160;say &quot;[fixed letter spacing][bar][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;|[state of room 1A]|[state of room 1B]|[state of room 1C]|[state of room 1D]|[state of room 1E]|[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[bar][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;|[state of room 2A]|[state of room 2B]|[state of room 2C]|[state of room 2D]|[state of room 2E]|[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[bar][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;|[state of room 3A]|[state of room 3B]|[state of room 3C]|[state of room 3D]|[state of room 3E]|[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[bar][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;|[state of room 4A]|[state of room 4B]|[state of room 4C]|[state of room 4D]|[state of room 4E]|[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[bar][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;|[state of room 5A]|[state of room 5B]|[state of room 5C]|[state of room 5D]|[state of room 5E]|[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[bar][variable letter spacing][line break]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4617_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4617_210"></a>To say bar:
            <br>
            &#160;&#160;&#160;&#160;say &quot;----------------------------------------------&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4618_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4618_210"></a>TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4619_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4619_210"></a>TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4620_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4620_210"></a>TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4621_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4621_210"></a>LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player's weight for one minute.]
            </p>
            </blockquote>
            <!--END CODE-->
            <p>The values set for these would depend on the type of poisonous gas in question; we'd want to adjust appropriately.</p>
            <!--START CODE "c4622_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4622_210"></a>To say state of (space - a room):
            <br>
            &#160;&#160;&#160;&#160;if the space is the location, say bold type;
            <br>
            &#160;&#160;&#160;&#160;if current concentration of space is less than 10.0ppm, say &quot; &quot;;
            <br>
            &#160;&#160;&#160;&#160;if current concentration of space is less than 100.0ppm, say &quot; &quot;;
            <br>
            &#160;&#160;&#160;&#160;say current concentration of space;
            <br>
            &#160;&#160;&#160;&#160;say roman type.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Now, in theory we might also want to account for sources and sinks, items that either inject poisonous gas into the environment or remove it again. For simplicity, we will assume that these contributions can also be calculated in ppm and that the total number of inert and poisonous gas molecules in a room never changes (so if poison gas molecules are added, an equal number of inert molecules are removed). If room pressure were able to change, our model would have to be improved, so let us assume for now that that never happens. We want this sink/source business to calculate before any other portion of the diffusion rulebook, so set it as a first diffusion rule.</p>
            <!--START CODE "c4623_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4623_210"></a>A gas source is a kind of thing. A gas source has a concentration called the contribution. The contribution of a gas source is usually 30.0ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4624_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4624_210"></a>Room 2B contains a gas source called a spigot. The contribution of the spigot is 50.0ppm. Room 5A contains a gas source.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4625_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4625_210"></a>A gas sink is a kind of thing. A gas sink has a concentration called the contribution. The contribution of a gas sink is usually 30.0ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4626_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4626_210"></a>Room 5E contains a gas sink called a fan. The contribution of the fan is 80.0ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4627_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4627_210"></a>The first diffusion rule (this is the sources and sinks rule):
            <br>
            &#160;&#160;&#160;&#160;follow the sources rule;
            <br>
            &#160;&#160;&#160;&#160;follow the sinks rule.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4628_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4628_210"></a>This is the sinks rule:
            <br>
            &#160;&#160;&#160;&#160;repeat with item running through gas sinks:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let space be the location of the item;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;decrease the former concentration of the space by the contribution of the item;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4629_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4629_210"></a>This is the sources rule:
            <br>
            &#160;&#160;&#160;&#160;repeat with second item running through gas sources:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let space be the location of the second item;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase the former concentration of the space by the contribution of the second item;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the former concentration of the space is less than 0.0ppm, now the former concentration of the space is 0.0ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4630_210"-->
            <blockquote class="code"><p class="quoted"><a id="c4630_210"></a>Test me with &quot;z / z / z / z / z / z / z / z&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <!--START EXAMPLE "256: Wonderland" "e438"-->
        <a id="e438"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example438'); return false;"><b>256</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example438'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Wonderland</span></b></a><br>
                    Hiking Mount Rainier, with attention to which locations are higher and which lower than the present location.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc37.html#e438"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example438" style="display: none;">
            <p>Suppose we have a landscape with a great deal of up and down variation, where GO UP and GO DOWN will be significant almost everywhere, and specifying them all individually a tremendous pain:</p>
            <!--START CODE "c4631_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4631_438"></a><a href="javascript:pasteCode('[=0x0022=]Wonderland[=0x0022=][=0x000A=][=0x000A=]An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.[=0x000A=][=0x000A=]Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.[=0x000A=][=0x000A=]Instead of going down:[=0x000A=][=0x0009=]if an adjacent room is lower than the location:[=0x000A=][=0x0009=][=0x0009=]let the valley be the lowest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the valley;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re in a local valley: there[=0x0027=]s no down from here.[=0x0022=][=0x000A=][=0x000A=]Instead of going up:[=0x000A=][=0x0009=]if an adjacent room is higher than the location:[=0x000A=][=0x0009=][=0x0009=]let the peak be the highest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the peak;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re on a local peak.[=0x0022=][=0x000A=][=0x000A=]Paradise is a room. Paradise has altitude 5400 feet. [=0x0022=]A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.[=0x0022=][=0x000A=][=0x000A=]Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. [=0x0022=]Numerous individual campsites and (on the road inventively labeled [=0x0027=]F[=0x0027=]) a handful of larger campgrounds suitable for church groups and family reunions.[=0x0022=][=0x000A=][=0x000A=]Longmire is southwest of Cougar Rock. It has altitude 2760 feet. [=0x0022=]A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.[=0x0022=][=0x000A=][=0x000A=]Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.[=0x000A=][=0x000A=][Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:][=0x000A=][=0x000A=]Instead of going up in the highest room:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]up / up / up / down / down / up / up[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]Wonderland[=0x0022=][=0x000A=][=0x000A=]An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.[=0x000A=][=0x000A=]Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.[=0x000A=][=0x000A=]Instead of going down:[=0x000A=][=0x0009=]if an adjacent room is lower than the location:[=0x000A=][=0x0009=][=0x0009=]let the valley be the lowest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the valley;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re in a local valley: there[=0x0027=]s no down from here.[=0x0022=][=0x000A=][=0x000A=]Instead of going up:[=0x000A=][=0x0009=]if an adjacent room is higher than the location:[=0x000A=][=0x0009=][=0x0009=]let the peak be the highest adjacent room;[=0x000A=][=0x0009=][=0x0009=]let the way be the best route from the location to the peak;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=](that is, [way])[paragraph break][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]try going the way;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]You[=0x0027=]re on a local peak.[=0x0022=][=0x000A=][=0x000A=]Paradise is a room. Paradise has altitude 5400 feet. [=0x0022=]A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.[=0x0022=][=0x000A=][=0x000A=]Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. [=0x0022=]Numerous individual campsites and (on the road inventively labeled [=0x0027=]F[=0x0027=]) a handful of larger campgrounds suitable for church groups and family reunions.[=0x0022=][=0x000A=][=0x000A=]Longmire is southwest of Cougar Rock. It has altitude 2760 feet. [=0x0022=]A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.[=0x0022=][=0x000A=][=0x000A=]Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.[=0x000A=][=0x000A=][Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:][=0x000A=][=0x000A=]Instead of going up in the highest room:[=0x000A=][=0x0009=]say [=0x0022=]You[=0x0027=]re standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]up / up / up / down / down / up / up[=0x0022=].[=0x000A=]\n', 'Example - Wonderland')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;Wonderland&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4632_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4632_438"></a>An altitude is a kind of value. 1000 feet specifies an altitude. A room has an altitude.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4633_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4633_438"></a>Definition: a room is low if its altitude is 3000 feet or less. Definition: a room is high if its altitude is 5000 feet or more.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4634_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4634_438"></a>Instead of going down:
            <br>
            &#160;&#160;&#160;&#160;if an adjacent room is lower than the location:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the valley be the lowest adjacent room;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the valley;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're in a local valley: there's no down from here.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4635_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4635_438"></a>Instead of going up:
            <br>
            &#160;&#160;&#160;&#160;if an adjacent room is higher than the location:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the peak be the highest adjacent room;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the way be the best route from the location to the peak;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;(that is, [way])[paragraph break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try going the way;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You're on a local peak.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4636_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4636_438"></a>Paradise is a room. Paradise has altitude 5400 feet. &quot;A handsome parking lot, a picnic ground, and the Henry M. Jackson Memorial Visitor Center. The latter offers, for serious climbers, a hot shower; for nature enthusiasts, an interpretive museum; and for car-trippers, a gift shop selling canned slugs. All of which is a largely unsuccessful distraction from the peak of Mt. Rainier beyond.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4637_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4637_438"></a>Cougar Rock is southwest of Paradise. The altitude of Cougar Rock is 3180 feet. &quot;Numerous individual campsites and (on the road inventively labeled 'F') a handful of larger campgrounds suitable for church groups and family reunions.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4638_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4638_438"></a>Longmire is southwest of Cougar Rock. It has altitude 2760 feet. &quot;A tiny town: it has to offer a few groceries, a post office, and a lodge for people who do not care to camp, all built in a rustic Park Service way.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4639_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4639_438"></a>Panorama Point is north of Paradise. It has altitude 6800 feet. Camp Muir is north of Panorama Point. It has altitude 10188 feet. Columbia Crest is northwest of Camp Muir. It has altitude 14410 feet. St Andrews Rock is west of Columbia Crest. It has altitude 10992 feet. Camp Schuman is northeast of Columbia Crest. It has altitude 9510 feet.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Since Mount Rainier National Park runs to over 235,000 acres, we will omit the rest of the locations, but it does seem fair to give a little more credit to anyone who makes the summit:</p>
            <!--START CODE "c4640_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4640_438"></a>Instead of going up in the highest room:
            <br>
            &#160;&#160;&#160;&#160;say &quot;You're standing at the summit of Mt. Rainier, the highest point in the state of Washington. There is no up.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4641_438"-->
            <blockquote class="code"><p class="quoted"><a id="c4641_438"></a>Test me with &quot;up / up / up / down / down / up / up&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <!--START EXAMPLE "257: Lethal Concentration 2" "e211"-->
        <a id="e211"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example211'); return false;"><b>257</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example211'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Lethal Concentration 2</span></b></a><br>
                    Poisonous gas again, only this time it sinks.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc80.html#e211"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example211" style="display: none;">
            <p>This is a slight variation on the previous gas diffusion example: the main difference is that gas preferentially moves towards lower rooms, and will gradually settle in the bottom floor. We do this by calculating the probability of movement separately for each pair of rooms.</p>
            <!--START CODE "c4642_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4642_211"></a><a href="javascript:pasteCode('[=0x0022=]Lethal Concentration[=0x0022=][=0x000A=][=0x000A=]A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.[=0x000A=][=0x000A=]A room has a concentration called current concentration. A room has a concentration called former concentration.[=0x000A=][=0x000A=]To decide what number is the probability inverse between (space - a room) and (second space - a room):[=0x000A=][=0x0009=]let guess be 20;[=0x000A=][=0x0009=]let way be the best route from space to second space;[=0x000A=][=0x0009=]if way is up, let guess be 50;[=0x000A=][=0x0009=]if way is down, let guess be 10;[=0x000A=][=0x0009=]if the guess is less than 10, decide on 10;[=0x000A=][=0x0009=]decide on guess.[=0x000A=][=0x000A=][If we wanted, we could introduce other concerns into the calculation here: open and closed doors, windows between rooms, rooms that are outdoors vs. those that are indoors, and so on. The possibilities are numerous, so we will stick with the simple principle that our poison gas sinks.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]follow the diffusion rules.[=0x000A=][=0x000A=]The diffusion rules are a rulebook.[=0x000A=][=0x000A=]A diffusion rule (this is the gas movement rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]let sum be 0.0 ppm;[=0x000A=][=0x0009=][=0x0009=]repeat with way running through directions:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let second space be the room way from the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if second space is a room:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let incoming be the former concentration of the second space divided by the probability inverse between second space and space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let outgoing be the former concentration of the space divided by the probability inverse between space and second space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let difference be incoming minus outgoing;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]increase sum by the difference;[=0x000A=][=0x0009=][=0x0009=]now current concentration of the space is the former concentration of the space plus the sum.[=0x000A=][=0x000A=]A diffusion rule (this is the resetting concentration rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]now the former concentration of the space is the current concentration of the space.[=0x000A=][=0x000A=]The last diffusion rule (this is the lethal dosage rule):[=0x000A=][=0x0009=]if the current concentration of the location is greater than LC50:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The concentration in the air overpowers you...[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]if the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You feel extremely uncomfortable in this environment.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something when the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=]if going, continue the action;[=0x000A=][=0x0009=]say [=0x0022=]You can[=0x0027=]t work in this environment: your eyes and nose sting and it hurts to breathe.[=0x0022=][=0x000A=][=0x000A=]Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is west of Room 2B and below room 1A. Room 2B is west of Room 2C and below Room 1B. Room 2C is west of Room 2D and below Room 1C. Room 2D is west of Room 2E and below Room 1D. Room 2E is south of Room 1E and below Room 1E.[=0x000A=][=0x000A=]The former concentration of Room 1C is 800.0 ppm.[=0x000A=][=0x000A=]The status grid is a device carried by the player. The status grid is switched on.[=0x000A=][=0x000A=][And just for fun, this time we[=0x0027=]ll make the grid prettier, too; but this will work only on the Z-machine setting, not Glulx.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]try examining the grid.[=0x000A=][=0x000A=][=0x0009=]Instead of examining the status grid:[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light down and right][top bar][unicode box drawings light down and left][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][state of room 1A][state of room 1B][state of room 1C][state of room 1D][state of room 1E]   upstairs[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical and right][middle bar][unicode box drawings light vertical and left][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][state of room 2A][state of room 2B][state of room 2C][state of room 2D][state of room 2E]   downstairs[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light up and right][bottom bar][unicode box drawings light up and left][variable letter spacing][line break][=0x0022=][=0x000A=][=0x000A=]To say top bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light down and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light horizontal][=0x0022=].[=0x000A=][=0x000A=]To say middle bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light vertical and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light triple dash horizontal][=0x0022=].[=0x000A=][=0x000A=]To say bottom bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light up and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light horizontal][=0x0022=].[=0x000A=][=0x000A=]TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.][=0x000A=][=0x000A=]TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.][=0x000A=][=0x000A=]TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.][=0x000A=][=0x000A=]LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player[=0x0027=]s weight for one minute.][=0x000A=][=0x000A=]Include Basic Screen Effects by Emily Short.[=0x000A=][=0x000A=]To say state of (space - a room):[=0x000A=][=0x0009=]if the current concentration of space is less than TLV, say blue letters;[=0x000A=][=0x0009=]if the current concentration of space is TLV, say blue letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV, say green letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV-STEL, say yellow letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV-C, say red letters;[=0x000A=][=0x0009=]say [=0x0022=][unicode square with diagonal crosshatch fill][=0x0022=];[=0x000A=][=0x0009=]say default letters;[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / z / z / z / z / z[=0x0022=].[=0x000A=][=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]Lethal Concentration[=0x0022=][=0x000A=][=0x000A=]A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.[=0x000A=][=0x000A=]A room has a concentration called current concentration. A room has a concentration called former concentration.[=0x000A=][=0x000A=]To decide what number is the probability inverse between (space - a room) and (second space - a room):[=0x000A=][=0x0009=]let guess be 20;[=0x000A=][=0x0009=]let way be the best route from space to second space;[=0x000A=][=0x0009=]if way is up, let guess be 50;[=0x000A=][=0x0009=]if way is down, let guess be 10;[=0x000A=][=0x0009=]if the guess is less than 10, decide on 10;[=0x000A=][=0x0009=]decide on guess.[=0x000A=][=0x000A=][If we wanted, we could introduce other concerns into the calculation here: open and closed doors, windows between rooms, rooms that are outdoors vs. those that are indoors, and so on. The possibilities are numerous, so we will stick with the simple principle that our poison gas sinks.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]follow the diffusion rules.[=0x000A=][=0x000A=]The diffusion rules are a rulebook.[=0x000A=][=0x000A=]A diffusion rule (this is the gas movement rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]let sum be 0.0 ppm;[=0x000A=][=0x0009=][=0x0009=]repeat with way running through directions:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]let second space be the room way from the space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=]if second space is a room:[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let incoming be the former concentration of the second space divided by the probability inverse between second space and space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let outgoing be the former concentration of the space divided by the probability inverse between space and second space;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]let difference be incoming minus outgoing;[=0x000A=][=0x0009=][=0x0009=][=0x0009=][=0x0009=]increase sum by the difference;[=0x000A=][=0x0009=][=0x0009=]now current concentration of the space is the former concentration of the space plus the sum.[=0x000A=][=0x000A=]A diffusion rule (this is the resetting concentration rule):[=0x000A=][=0x0009=]repeat with space running through rooms:[=0x000A=][=0x0009=][=0x0009=]now the former concentration of the space is the current concentration of the space.[=0x000A=][=0x000A=]The last diffusion rule (this is the lethal dosage rule):[=0x000A=][=0x0009=]if the current concentration of the location is greater than LC50:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=]The concentration in the air overpowers you...[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]end the story;[=0x000A=][=0x0009=]otherwise:[=0x000A=][=0x0009=][=0x0009=]if the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=][=0x0009=][=0x0009=]say [=0x0022=]You feel extremely uncomfortable in this environment.[=0x0022=][=0x000A=][=0x000A=]Instead of doing something when the current concentration of the location is greater than TLV-STEL:[=0x000A=][=0x0009=]if going, continue the action;[=0x000A=][=0x0009=]say [=0x0022=]You can[=0x0027=]t work in this environment: your eyes and nose sting and it hurts to breathe.[=0x0022=][=0x000A=][=0x000A=]Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.[=0x000A=][=0x000A=]Room 2A is west of Room 2B and below room 1A. Room 2B is west of Room 2C and below Room 1B. Room 2C is west of Room 2D and below Room 1C. Room 2D is west of Room 2E and below Room 1D. Room 2E is south of Room 1E and below Room 1E.[=0x000A=][=0x000A=]The former concentration of Room 1C is 800.0 ppm.[=0x000A=][=0x000A=]The status grid is a device carried by the player. The status grid is switched on.[=0x000A=][=0x000A=][And just for fun, this time we[=0x0027=]ll make the grid prettier, too; but this will work only on the Z-machine setting, not Glulx.][=0x000A=][=0x000A=]Every turn:[=0x000A=][=0x0009=]try examining the grid.[=0x000A=][=0x000A=][=0x0009=]Instead of examining the status grid:[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light down and right][top bar][unicode box drawings light down and left][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][state of room 1A][state of room 1B][state of room 1C][state of room 1D][state of room 1E]   upstairs[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical and right][middle bar][unicode box drawings light vertical and left][line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][state of room 2A][state of room 2B][state of room 2C][state of room 2D][state of room 2E]   downstairs[line break][=0x0022=];[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light up and right][bottom bar][unicode box drawings light up and left][variable letter spacing][line break][=0x0022=][=0x000A=][=0x000A=]To say top bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light down and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light horizontal][=0x0022=].[=0x000A=][=0x000A=]To say middle bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light vertical and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light triple dash horizontal][=0x0022=].[=0x000A=][=0x000A=]To say bottom bar:[=0x000A=][=0x0009=]repeat with N running from 1 to 9:[=0x000A=][=0x0009=][=0x0009=]if the remainder after dividing N by 2 is 0, say [=0x0022=][unicode box drawings light up and horizontal][=0x0022=];[=0x000A=][=0x0009=][=0x0009=]otherwise say [=0x0022=][unicode box drawings light horizontal][=0x0022=].[=0x000A=][=0x000A=]TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.][=0x000A=][=0x000A=]TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.][=0x000A=][=0x000A=]TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.][=0x000A=][=0x000A=]LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player[=0x0027=]s weight for one minute.][=0x000A=][=0x000A=]Include Basic Screen Effects by Emily Short.[=0x000A=][=0x000A=]To say state of (space - a room):[=0x000A=][=0x0009=]if the current concentration of space is less than TLV, say blue letters;[=0x000A=][=0x0009=]if the current concentration of space is TLV, say blue letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV, say green letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV-STEL, say yellow letters;[=0x000A=][=0x0009=]if the current concentration of space is greater than TLV-C, say red letters;[=0x000A=][=0x0009=]say [=0x0022=][unicode square with diagonal crosshatch fill][=0x0022=];[=0x000A=][=0x0009=]say default letters;[=0x000A=][=0x0009=]say [=0x0022=][unicode box drawings light vertical][=0x0022=].[=0x000A=][=0x000A=]Test me with [=0x0022=]z / z / z / z / z / z / z / z[=0x0022=].[=0x000A=][=0x000A=]\n', 'Example - Lethal Concentration 2')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;Lethal Concentration&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4643_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4643_211"></a>A concentration is a kind of value. 200.9ppm specifies concentration. 200.9 ppm specifies concentration.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4644_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4644_211"></a>A room has a concentration called current concentration. A room has a concentration called former concentration.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4645_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4645_211"></a>To decide what number is the probability inverse between (space - a room) and (second space - a room):
            <br>
            &#160;&#160;&#160;&#160;let guess be 20;
            <br>
            &#160;&#160;&#160;&#160;let way be the best route from space to second space;
            <br>
            &#160;&#160;&#160;&#160;if way is up, let guess be 50;
            <br>
            &#160;&#160;&#160;&#160;if way is down, let guess be 10;
            <br>
            &#160;&#160;&#160;&#160;if the guess is less than 10, decide on 10;
            <br>
            &#160;&#160;&#160;&#160;decide on guess.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>If we wanted, we could introduce other concerns into the calculation here: open and closed doors, windows between rooms, rooms that are outdoors vs. those that are indoors, and so on. The possibilities are numerous, so we will stick with the simple principle that our poison gas sinks.</p>
            <!--START CODE "c4646_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4646_211"></a>Every turn:
            <br>
            &#160;&#160;&#160;&#160;follow the diffusion rules.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4647_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4647_211"></a>The diffusion rules are a rulebook.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4648_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4648_211"></a>A diffusion rule (this is the gas movement rule):
            <br>
            &#160;&#160;&#160;&#160;repeat with space running through rooms:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let sum be 0.0 ppm;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeat with way running through directions:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let second space be the room way from the space;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if second space is a room:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let incoming be the former concentration of the second space divided by the probability inverse between second space and space;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let outgoing be the former concentration of the space divided by the probability inverse between space and second space;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let difference be incoming minus outgoing;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;increase sum by the difference;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now current concentration of the space is the former concentration of the space plus the sum.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4649_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4649_211"></a>A diffusion rule (this is the resetting concentration rule):
            <br>
            &#160;&#160;&#160;&#160;repeat with space running through rooms:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now the former concentration of the space is the current concentration of the space.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4650_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4650_211"></a>The last diffusion rule (this is the lethal dosage rule):
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of the location is greater than LC50:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;The concentration in the air overpowers you...&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end the story;
            <br>
            &#160;&#160;&#160;&#160;otherwise:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the current concentration of the location is greater than TLV-STEL:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;You feel extremely uncomfortable in this environment.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4651_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4651_211"></a>Instead of doing something when the current concentration of the location is greater than TLV-STEL:
            <br>
            &#160;&#160;&#160;&#160;if going, continue the action;
            <br>
            &#160;&#160;&#160;&#160;say &quot;You can't work in this environment: your eyes and nose sting and it hurts to breathe.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4652_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4652_211"></a>Room 1A is west of Room 1B. Room 1B is west of Room 1C. Room 1C is west of Room 1D. Room 1D is west of Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4653_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4653_211"></a>Room 2A is west of Room 2B and below room 1A. Room 2B is west of Room 2C and below Room 1B. Room 2C is west of Room 2D and below Room 1C. Room 2D is west of Room 2E and below Room 1D. Room 2E is south of Room 1E and below Room 1E.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4654_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4654_211"></a>The former concentration of Room 1C is 800.0 ppm.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4655_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4655_211"></a>The status grid is a device carried by the player. The status grid is switched on.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>And just for fun, this time we'll make the grid prettier, too; but this will work only on the Z-machine setting, not Glulx.</p>
            <!--START CODE "c4656_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4656_211"></a>Every turn:
            <br>
            &#160;&#160;&#160;&#160;try examining the grid.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4657_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4657_211"></a>&#160;&#160;&#160;&#160;Instead of examining the status grid:
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light down and right][top bar][unicode box drawings light down and left][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light vertical]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[state of room 1A][state of room 1B][state of room 1C][state of room 1D][state of room 1E]   upstairs[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light vertical and right][middle bar][unicode box drawings light vertical and left][line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light vertical]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[state of room 2A][state of room 2B][state of room 2C][state of room 2D][state of room 2E]   downstairs[line break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light up and right][bottom bar][unicode box drawings light up and left][variable letter spacing][line break]&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4658_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4658_211"></a>To say top bar:
            <br>
            &#160;&#160;&#160;&#160;repeat with N running from 1 to 9:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the remainder after dividing N by 2 is 0, say &quot;[unicode box drawings light down and horizontal]&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[unicode box drawings light horizontal]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4659_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4659_211"></a>To say middle bar:
            <br>
            &#160;&#160;&#160;&#160;repeat with N running from 1 to 9:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the remainder after dividing N by 2 is 0, say &quot;[unicode box drawings light vertical and horizontal]&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[unicode box drawings light triple dash horizontal]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4660_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4660_211"></a>To say bottom bar:
            <br>
            &#160;&#160;&#160;&#160;repeat with N running from 1 to 9:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if the remainder after dividing N by 2 is 0, say &quot;[unicode box drawings light up and horizontal]&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;otherwise say &quot;[unicode box drawings light horizontal]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4661_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4661_211"></a>TLV is a concentration that varies. TLV is 30.0ppm. [Long-term exposure maximum, safe for 8 hours a day.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4662_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4662_211"></a>TLV-STEL is a concentration that varies. TLV-STEL is 50.0ppm. [Short-term exposure maximum, safe for fifteen minutes max.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4663_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4663_211"></a>TLV-C is a concentration that varies. TLV-C is 150.0ppm. [Absolute exposure ceiling.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4664_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4664_211"></a>LC50 is a concentration that varies. LC50 is 300.0ppm. [Concentration at which 50 percent of test subjects die of exposure, usually expressed in terms of time and body weight; in our LC50 these are factored in for the player's weight for one minute.]
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4665_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4665_211"></a>Include Basic Screen Effects by Emily Short.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4666_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4666_211"></a>To say state of (space - a room):
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of space is less than TLV, say blue letters;
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of space is TLV, say blue letters;
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of space is greater than TLV, say green letters;
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of space is greater than TLV-STEL, say yellow letters;
            <br>
            &#160;&#160;&#160;&#160;if the current concentration of space is greater than TLV-C, say red letters;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode square with diagonal crosshatch fill]&quot;;
            <br>
            &#160;&#160;&#160;&#160;say default letters;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[unicode box drawings light vertical]&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c4667_211"-->
            <blockquote class="code"><p class="quoted"><a id="c4667_211"></a>Test me with &quot;z / z / z / z / z / z / z / z&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <hr>
    </div>
    <!--START IGNORE-->
    <div class="bookfooter">
        <table class="fullwidth">
            <tr>
                <td class="footerprevious">
                    <a href="doc230.html" class="footerlink">Previous</a>
                </td>
                <td class="footercontents">
                    <a href="index.html" class="footerlink">Contents</a>
                </td>
                <td class="footernext">
                    <a href="doc232.html" class="footerlink">Next</a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
</body>
</html>
