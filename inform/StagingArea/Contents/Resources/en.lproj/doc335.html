<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="indoc_WI.css" rel="stylesheet" type="text/css">
    <!--Generated by indoc-->
    <title>19.11. Success and failure</title>
    <script type="text/javascript">
            function showExtra(id, imid) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                    document.getElementById(imid).src = 'inform:/doc_images/extra.png';
                } else {
                    document.getElementById(id).style.display = 'block';
                    document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
                }
            }
            function onLoaded() {
                if (window.location.hash) {
                    var hash = window.location.hash.substring(2);
                    if (hash.search("_") >= 0) {
                        var res = hash.split("_");
                        showExample("example"+res[1]);
                    } else {
                        showExample("example"+hash);
                    }
                }
            }
            window.onload=onLoaded;
            function showExample(id) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                } else {
                    document.getElementById(id).style.display = 'block';
                }
            }
            function openExtra(id, imid) {
                document.getElementById(id).style.display = 'block';
                document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
            }
            function closeExtra(id, imid) {
                document.getElementById(id).style.display = 'none';
                document.getElementById(imid).src = 'inform:/doc_images/extra.png';
            }
    </script>
</head>
<body class="paper papertint">
    <script type="text/javascript">
        function pasteCode(code) {
            var myProject = window.Project;

            myProject.selectView('source');
            myProject.pasteCode(code);
        }
    </script>
    <script type="text/javascript">
        function createNewProject(code, title) {
            var myProject = window.Project;

            myProject.createNewProject(title, code);
        }
    </script>

    <!--SEARCH TITLE "Success and failure"-->
    <!--SEARCH SECTION "19.11"-->
    <!--SEARCH SORT "000-019-011-000"-->
    <!--START IGNORE 334-->
    <div class="bookheader">
        <table class="fullwidth midnightblack">
            <tr>
                <td class="midnightbannerleftcell">
                    <a href="doc334.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft"></a>
                </td>
                <td class="midnightbannercentrecell">
                    <a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 19: Rulebooks</span></a>
                </td>
                <td class="midnightbannerrightcell">
                    <a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup"></a><a href="doc336.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright"></a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
    <p class="sectionheading">ยง19.11. Success and failure</p>
    <p>Though we have blurred over this point so far, each rule must ordinarily end with one of three outcomes: success, failure and neither (&quot;no outcome&quot;).</p>
    <p>When a rulebook is followed, what happens is that each of its rules is followed in turn <span class="boldface">until one of them ends in success or failure</span> - if ever: it is possible that each rule is tried and each ends with no outcome, so that the rulebook simply runs out of rules to try.</p>
    <p>For some rulebooks, these are not useful ideas: &quot;every turn&quot; rules, for instance, by default never produce an outcome, which is why the &quot;every turn&quot; rulebook normally runs through all its rules at the end of each turn. (Use of the phrases below can change that, so it's best not to use them in &quot;every turn&quot; rules.) But for other rulebooks, such as &quot;check taking&quot;, it's important that a rule which fails will stop the whole rulebook. For instance, we might find that the &quot;can't take yourself rule&quot; produces no outcome (because we aren't trying to do that), and then likewise the &quot;can't take other people rule&quot; (ditto) but that the &quot;can't take component parts rule&quot; prints up a complaint, and fails the action: the rulebook stops, and never goes on to (for instance) the &quot;can't take scenery rule&quot;. This is good, because an impossible action often fails for several reasons at once, and we only want to print up one objection, not a whole list.</p>
    <p>To follow the working of this mechanism, we need to be able to predict the outcome of any given rule. Sometimes this is easy to spot. For instance, in a rule which works on actions:</p>
    <!--START CODE "c7865"-->
    <blockquote class="code"><p class="quoted"><a id="c7865"></a>continue the action; <span class="italic">means</span> &quot;end this rule with no outcome&quot;
    <br>
    stop the action; <span class="italic">means</span> &quot;end this rule in failure&quot;
    <br>
    ... instead; <span class="italic">means</span> &quot;end this rule in failure&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>(&quot;Success&quot; and &quot;failure&quot; are technical terms here: they do not mean that the player has or hasn't got what he wanted.) This is why the rule:</p>
    <!--START CODE "c7866"-->
    <blockquote class="code"><p class="quoted"><a id="c7866"></a>Before taking something: say &quot;The sentry won't let you!&quot; instead.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>ends in failure, and therefore stops the &quot;before&quot; rulebook. Another easy-to-spot case is when a rule makes use of the explicit phrases:</p>
        <!--START PHRASE "defn275"-->
        <div class="definition">
            <a id="defn275"></a><p class='defnprototype'><b>rule succeeds</b></p>

            <!--END PHRASE-->
            <!--definition of ph_succeeds-->

    <p>    This causes the current rule to end immediately, with its outcome considered to be a success. The rulebook being worked through also ends, and is also a success.</p>

        <!--end definition-->
    </div>

        <!--START PHRASE "defn276"-->
        <div class="definition">
            <a id="defn276"></a><p class='defnprototype'><b>rule fails</b></p>

            <!--END PHRASE-->
            <!--definition of ph_fails-->

    <p>    This causes the current rule to end immediately, with its outcome considered to be a failure. The rulebook being worked through also ends, and is also a failure.</p>

        <!--end definition-->
    </div>

        <!--START PHRASE "defn277"-->
        <div class="definition">
            <a id="defn277"></a><p class='defnprototype'><b>make no decision</b></p>

            <!--END PHRASE-->
            <!--definition of ph_nodecision-->

    <p>    This causes the current rule to end immediately, but with no outcome. That means the rulebook being worked through will continue to run on, beginning with the next rule.</p>

        <!--end definition-->
    </div>

    <p>But what happens if a rule simply doesn't say whether it succeeds, fails or has no outcome? In that case <span class="boldface">it depends on the rulebook</span>. For almost all rulebooks, a rule which doesn't make a choice has no outcome, as in the following example:</p>
    <!--START CODE "c7867"-->
    <blockquote class="code"><p class="quoted"><a id="c7867"></a>Before taking something: say &quot;The sentry looks at you anxiously!&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>This rule, if it takes effect, ends with no outcome - so the action continues. But other rulebooks have a different convention: the most important is &quot;instead&quot;, where a rule making no explicit choice is deemed to end in failure. For instance:</p>
    <!--START CODE "c7868"-->
    <blockquote class="code"><p class="quoted"><a id="c7868"></a>Instead of taking something: say &quot;The sentry prods you with his rifle!&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>This rule, if it takes effect, ends in failure and therefore stops the action.</p>
    <p>We call this the <span class="boldface">default outcome</span> of a rulebook. The default outcome of &quot;before&quot; (and of almost all rulebooks, in fact) is no outcome; the default outcome of &quot;instead&quot; is failure; the default outcome of &quot;after&quot; is success. The few exceptional cases with default outcome success or failure are marked as such in the Rules index.</p>
    <p>When we create a rulebook, it will default to &quot;no outcome&quot;. But we can specify otherwise with sentences like so:</p>
    <!--START CODE "c7869"-->
    <blockquote class="code"><p class="quoted"><a id="c7869"></a>The cosmic analysis rules are a rulebook. The cosmic analysis rules have default failure.
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Finally, note that the default outcome for a rulebook is really the default outcome for any rule in that rulebook: if no rules in the rulebook ever apply, for instance if there aren't any and the rulebook is empty, then the rulebook ends with no outcome at all.</p>
    <p>We can test the latest outcome like so:</p>
        <!--START PHRASE "defn278"-->
        <div class="definition">
            <a id="defn278"></a><p class='defnprototype'><b>if rule succeeded:</b></p>

            <!--END PHRASE-->
            <!--definition of ph_succeeded-->

    <p>    This condition is true if the most recently followed rule or rulebook ended in success. Example:</p>
    <!--START CODE "c7870"-->
    <blockquote class="code"><p class="quoted"><a id="c7870"></a>follow the hypothetical clever rule;
    <br>
    if rule succeeded:
    <br>
    &#160;&#160;&#160;&#160;...
    </p>
    </blockquote>
    <!--END CODE-->

        <!--end definition-->
    </div>

        <!--START PHRASE "defn279"-->
        <div class="definition">
            <a id="defn279"></a><p class='defnprototype'><b>if rule failed:</b></p>

            <!--END PHRASE-->
            <!--definition of ph_failed-->

    <p>    This condition is true if the most recently followed rule or rulebook ended in failure. Example:</p>
    <!--START CODE "c7871"-->
    <blockquote class="code"><p class="quoted"><a id="c7871"></a>follow the hypothetical clever rule;
    <br>
    if rule failed:
    <br>
    &#160;&#160;&#160;&#160;...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Note that this is not the opposite of &quot;rule succeeded&quot;, because there's a third possibility: that it ended with no outcome.</p>

        <!--end definition-->
    </div>

    <hr>
    <div class="bookexamples">
        <p class="chapterheading"></p>
        <!--START EXAMPLE "403: Kyoto" "e380"-->
        <a id="e380"></a><table class="egcue">
            <tr>
                <td class="egcellforoval">
                    <div class="egovalfornumber overstruckimage">
                        <a href="#" class="eglink" onclick="showExample('example380'); return false;"><b>403</b></a></div>

                </td>
                <td class="egnamecell">
                    <p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example380'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Kyoto</span></b></a><br>
                    Expanding the effects of the THROW something AT something command so that objects do make contact with one another.</p>

                </td>
                <td class="egcrossref">
                    <!--START IGNORE-->
                    <div class="egovalforxref overstruckimage">
                        <a href="Rdoc83.html#e380"><i>RB</i></a></div>
                    <!--END IGNORE-->

                </td>
            </tr>
        </table>

        <div class="egpanel" id="example380" style="display: none;">
            <p>Suppose we want to expand the function of the existing THROW SOMETHING AT command so that a thrown object actually does make contact most of the time. A glance at the Actions index tells us that the Throwing it at rulebook currently looks like this:</p>
            <!--START CODE "c7872_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7872_380"></a>Throwing something at something (past tense thrown it at)
            <br>
            &#160;&#160;&#160;&#160;&quot;drop [something held] at/against/on/onto [something]&quot;
            <br>
            </p>
            </blockquote>
            <table class="codetable">
                <tr>
                    <td class="quotedtablecell">
                        <p class="quoted">check</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">an actor throwing something at</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">implicitly remove thrown clothing rule</p>

                    </td>
                </tr>
                <tr>
                    <td class="quotedtablecell">
                        <p class="quoted">check</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">an actor throwing something at</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">futile to throw things at inanimate objects rule</p>

                    </td>
                </tr>
                <tr>
                    <td class="quotedtablecell">
                        <p class="quoted">check</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">an actor throwing something at</p>

                    </td>
                    <td class="quotedtablecell">
                        <p class="quoted">block throwing at rule</p>

                    </td>
                </tr>
            </table>
            <blockquote><p></p>
            </blockquote>
            <!--END CODE-->
            <p>Some of those still look useful. We want to leave the &quot;implicitly remove thrown clothing&quot; rule, for instance -- no fair having the player throw a hat that's on his head. On the other hand, the &quot;futile to throw things at inanimate objects rule&quot; is going to have to go, because that would prevent us from ever being able to complete the throwing command. So let's get rid of that:</p>
            <!--START CODE "c7873_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7873_380"></a><a href="javascript:pasteCode('[=0x0022=]Kyoto[=0x0022=][=0x000A=][=0x000A=]Part 1 - Throwing Rules[=0x000A=][=0x000A=]The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.[=0x000A=][=0x000A=][That [=0x0022=]block throwing at[=0x0022=] rule also looks sinister: any [=0x0022=]block...[=0x0022=] rule in the standard actions library is there to print a message telling the player he can[=0x0027=]t do what he[=0x0027=]s asked to do.][=0x000A=][=0x000A=][But it[=0x0027=]s not enough to ignore it, the way we did the [=0x0022=]futile[=0x0022=] rule. Since we are only expanding the command to affect inanimate objects, let[=0x0027=]s replace the [=0x0022=]block throwing at[=0x0022=] rule with a different one which will only prevent the player throwing things at people:][=0x000A=][=0x000A=]The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.[=0x000A=][=0x000A=]This is the block throwing at people rule:[=0x000A=][=0x0009=]if the second noun is a person, say [=0x0022=]That might be construed as an attack.[=0x0022=] instead.[=0x000A=][=0x000A=][Now we[=0x0027=]ve changed the command so that some action can sometimes be carried out here -- but we don[=0x0027=]t have any rules for what happens. It[=0x0027=]s time to create some rules for our model world.][=0x000A=][=0x000A=]A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.[=0x000A=][=0x000A=][If we[=0x0027=]re actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:][=0x000A=][=0x000A=]Check throwing it at (this is the block juggling rule):[=0x000A=][=0x0009=]if the player is carrying the second noun, say [=0x0022=]It would be difficult to throw at something you are yourself holding.[=0x0022=] instead.[=0x000A=][=0x000A=]Check throwing it at (this is the avoid throwing things into themselves rule):[=0x000A=][=0x0009=]if the second noun is within the noun, say [=0x0022=]That would be a nice magic trick.[=0x0022=] instead.[=0x000A=][=0x000A=][And then the rules for the action itself:][=0x000A=][=0x000A=]Carry out throwing it at (this is the check aerodynamics rule):[=0x000A=][=0x0009=]if the noun is flat:[=0x000A=][=0x0009=][=0x0009=]move noun to location;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun], unwieldy, flutters to the ground.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][That [=0x0022=]rule succeeds[=0x0022=] ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:][=0x000A=][=0x000A=]Carry out throwing it at (this is the contact rule):[=0x000A=][=0x0009=]say [=0x0022=][The noun] hits [the second noun].[paragraph break][=0x0022=];[=0x000A=][=0x0009=]if the second noun is fragile and the noun is hard:[=0x000A=][=0x0009=][=0x0009=]destroy the second noun.[=0x000A=][=0x000A=]Carry out throwing it at (this is the landing rule):[=0x000A=][=0x0009=]let destination be the location;[=0x000A=][=0x0009=]if the second noun is on a supporter (called endtable), let destination be the endtable;[=0x000A=][=0x0009=]if the second noun is a supporter, let destination be the second noun;[=0x000A=][=0x0009=]move the noun to the destination;[=0x000A=][=0x0009=]if the noun is fragile and the second noun is hard:[=0x000A=][=0x0009=][=0x0009=]destroy the noun;[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=][The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].[=0x0022=][=0x000A=][=0x000A=][These rules are assuming some backup information, so let[=0x0027=]s provide that as well:][=0x000A=][=0x000A=]Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.[=0x000A=][=0x000A=]To destroy (item - a thing):[=0x000A=][=0x0009=]let home be the holder of the item;[=0x000A=][=0x0009=]if the item is part of something (called the superstructure), let home be the holder of the superstructure;[=0x000A=][=0x0009=]if the item is visible:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].[=0x0022=];[=0x000A=][=0x0009=]if something is relying on the item,[=0x000A=][=0x0009=][=0x0009=]now all the things which are relying on the item are in the home;[=0x000A=][=0x0009=]now the item is nowhere.[=0x000A=][=0x000A=][Now suppose we[=0x0027=]d like to add some further cases for what happens if the player breaks a fragile door this way:][=0x000A=][=0x000A=]To destroy (item - a door):[=0x000A=][=0x0009=]now the item is open;[=0x000A=][=0x0009=]now the item is unopenable;[=0x000A=][=0x0009=]say [=0x0022=][The item] smashes.[=0x0022=][=0x000A=][=0x000A=]Rule for printing the name of an unopenable open door while not throwing something at something:[=0x000A=][=0x0009=]say [=0x0022=]open doorway[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]door[=0x0022=] or [=0x0022=]doorway[=0x0022=] as a door.[=0x000A=][=0x000A=][This works, except that objects will continue to [=0x0022=]strike[=0x0022=] open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.][=0x000A=][=0x000A=]This is the flying through doorways rule:[=0x000A=][=0x0009=]if the second noun is an open door:[=0x000A=][=0x0009=][=0x0009=]let the distant room be the other side of the second noun;[=0x000A=][=0x0009=][=0x0009=]move the noun to the distant room;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun] flies out of sight into [the distant room].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:][=0x000A=][=0x000A=]The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.[=0x000A=][=0x000A=][The magic of rulebooks is that they allow authors to amend each other[=0x0027=]s work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.][=0x000A=][=0x000A=][Now for an actual scenario with which to test this:][=0x000A=][=0x000A=] Part 2 - The Study[=0x000A=][=0x000A=]The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.[=0x000A=][=0x000A=]The player carries a netsuke and a shamisen. The description of the netsuke is [=0x0022=]A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.[=0x0022=] The netsuke is round, hard, and strong. Understand [=0x0022=]green[=0x0022=] or [=0x0022=]stone[=0x0022=] or [=0x0022=]bullfrog[=0x0022=] as the netsuke.[=0x000A=][=0x000A=]The description of the shamisen is [=0x0022=]An instrument you have only begun to learn to play.[=0x0022=] The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is [=0x0022=][if the body is not part of the shamisen]shamisen [end if]body[=0x0022=]. The printed name of the neck is [=0x0022=][if the neck is not part of the shamisen]shamisen [end if]neck[=0x0022=]. Understand [=0x0022=]shamisen[=0x0022=] as the body when the body is not part of the shamisen. Understand [=0x0022=]shamisen[=0x0022=] as the neck when the neck is not part of the shamisen.[=0x000A=][=0x000A=]The description of the Study is [=0x0022=]A restful three-tatami room.[=0x0022=] The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is [=0x0022=]A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.[=0x0022=] The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.[=0x000A=][=0x000A=]The description of the Moss Garden is [=0x0022=]Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.[=0x0022=] The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say [=0x0022=]You spent too long over their placement.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]test one / test two[=0x0022=].[=0x000A=][=0x000A=]Test one with [=0x0022=]open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke[=0x0022=].[=0x000A=][=0x000A=]Test two with [=0x0022=]throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke[=0x0022=].[=0x000A=]\n')"><img alt="paste@2x.png" src="inform:/doc_images/paste@2x.png" width="13" height="13"></a> <a href="javascript:createNewProject('[=0x0022=]Kyoto[=0x0022=][=0x000A=][=0x000A=]Part 1 - Throwing Rules[=0x000A=][=0x000A=]The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.[=0x000A=][=0x000A=][That [=0x0022=]block throwing at[=0x0022=] rule also looks sinister: any [=0x0022=]block...[=0x0022=] rule in the standard actions library is there to print a message telling the player he can[=0x0027=]t do what he[=0x0027=]s asked to do.][=0x000A=][=0x000A=][But it[=0x0027=]s not enough to ignore it, the way we did the [=0x0022=]futile[=0x0022=] rule. Since we are only expanding the command to affect inanimate objects, let[=0x0027=]s replace the [=0x0022=]block throwing at[=0x0022=] rule with a different one which will only prevent the player throwing things at people:][=0x000A=][=0x000A=]The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.[=0x000A=][=0x000A=]This is the block throwing at people rule:[=0x000A=][=0x0009=]if the second noun is a person, say [=0x0022=]That might be construed as an attack.[=0x0022=] instead.[=0x000A=][=0x000A=][Now we[=0x0027=]ve changed the command so that some action can sometimes be carried out here -- but we don[=0x0027=]t have any rules for what happens. It[=0x0027=]s time to create some rules for our model world.][=0x000A=][=0x000A=]A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.[=0x000A=][=0x000A=][If we[=0x0027=]re actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:][=0x000A=][=0x000A=]Check throwing it at (this is the block juggling rule):[=0x000A=][=0x0009=]if the player is carrying the second noun, say [=0x0022=]It would be difficult to throw at something you are yourself holding.[=0x0022=] instead.[=0x000A=][=0x000A=]Check throwing it at (this is the avoid throwing things into themselves rule):[=0x000A=][=0x0009=]if the second noun is within the noun, say [=0x0022=]That would be a nice magic trick.[=0x0022=] instead.[=0x000A=][=0x000A=][And then the rules for the action itself:][=0x000A=][=0x000A=]Carry out throwing it at (this is the check aerodynamics rule):[=0x000A=][=0x0009=]if the noun is flat:[=0x000A=][=0x0009=][=0x0009=]move noun to location;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun], unwieldy, flutters to the ground.[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][That [=0x0022=]rule succeeds[=0x0022=] ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:][=0x000A=][=0x000A=]Carry out throwing it at (this is the contact rule):[=0x000A=][=0x0009=]say [=0x0022=][The noun] hits [the second noun].[paragraph break][=0x0022=];[=0x000A=][=0x0009=]if the second noun is fragile and the noun is hard:[=0x000A=][=0x0009=][=0x0009=]destroy the second noun.[=0x000A=][=0x000A=]Carry out throwing it at (this is the landing rule):[=0x000A=][=0x0009=]let destination be the location;[=0x000A=][=0x0009=]if the second noun is on a supporter (called endtable), let destination be the endtable;[=0x000A=][=0x0009=]if the second noun is a supporter, let destination be the second noun;[=0x000A=][=0x0009=]move the noun to the destination;[=0x000A=][=0x0009=]if the noun is fragile and the second noun is hard:[=0x000A=][=0x0009=][=0x0009=]destroy the noun;[=0x000A=][=0x0009=][=0x0009=]rule succeeds;[=0x000A=][=0x0009=]say [=0x0022=][The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].[=0x0022=][=0x000A=][=0x000A=][These rules are assuming some backup information, so let[=0x0027=]s provide that as well:][=0x000A=][=0x000A=]Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.[=0x000A=][=0x000A=]To destroy (item - a thing):[=0x000A=][=0x0009=]let home be the holder of the item;[=0x000A=][=0x0009=]if the item is part of something (called the superstructure), let home be the holder of the superstructure;[=0x000A=][=0x0009=]if the item is visible:[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].[=0x0022=];[=0x000A=][=0x0009=]if something is relying on the item,[=0x000A=][=0x0009=][=0x0009=]now all the things which are relying on the item are in the home;[=0x000A=][=0x0009=]now the item is nowhere.[=0x000A=][=0x000A=][Now suppose we[=0x0027=]d like to add some further cases for what happens if the player breaks a fragile door this way:][=0x000A=][=0x000A=]To destroy (item - a door):[=0x000A=][=0x0009=]now the item is open;[=0x000A=][=0x0009=]now the item is unopenable;[=0x000A=][=0x0009=]say [=0x0022=][The item] smashes.[=0x0022=][=0x000A=][=0x000A=]Rule for printing the name of an unopenable open door while not throwing something at something:[=0x000A=][=0x0009=]say [=0x0022=]open doorway[=0x0022=].[=0x000A=][=0x000A=]Understand [=0x0022=]door[=0x0022=] or [=0x0022=]doorway[=0x0022=] as a door.[=0x000A=][=0x000A=][This works, except that objects will continue to [=0x0022=]strike[=0x0022=] open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.][=0x000A=][=0x000A=]This is the flying through doorways rule:[=0x000A=][=0x0009=]if the second noun is an open door:[=0x000A=][=0x0009=][=0x0009=]let the distant room be the other side of the second noun;[=0x000A=][=0x0009=][=0x0009=]move the noun to the distant room;[=0x000A=][=0x0009=][=0x0009=]say [=0x0022=][The noun] flies out of sight into [the distant room].[=0x0022=];[=0x000A=][=0x0009=][=0x0009=]rule succeeds.[=0x000A=][=0x000A=][If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:][=0x000A=][=0x000A=]The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.[=0x000A=][=0x000A=][The magic of rulebooks is that they allow authors to amend each other[=0x0027=]s work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.][=0x000A=][=0x000A=][Now for an actual scenario with which to test this:][=0x000A=][=0x000A=] Part 2 - The Study[=0x000A=][=0x000A=]The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.[=0x000A=][=0x000A=]The player carries a netsuke and a shamisen. The description of the netsuke is [=0x0022=]A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.[=0x0022=] The netsuke is round, hard, and strong. Understand [=0x0022=]green[=0x0022=] or [=0x0022=]stone[=0x0022=] or [=0x0022=]bullfrog[=0x0022=] as the netsuke.[=0x000A=][=0x000A=]The description of the shamisen is [=0x0022=]An instrument you have only begun to learn to play.[=0x0022=] The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is [=0x0022=][if the body is not part of the shamisen]shamisen [end if]body[=0x0022=]. The printed name of the neck is [=0x0022=][if the neck is not part of the shamisen]shamisen [end if]neck[=0x0022=]. Understand [=0x0022=]shamisen[=0x0022=] as the body when the body is not part of the shamisen. Understand [=0x0022=]shamisen[=0x0022=] as the neck when the neck is not part of the shamisen.[=0x000A=][=0x000A=]The description of the Study is [=0x0022=]A restful three-tatami room.[=0x0022=] The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is [=0x0022=]A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.[=0x0022=] The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.[=0x000A=][=0x000A=]The description of the Moss Garden is [=0x0022=]Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.[=0x0022=] The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say [=0x0022=]You spent too long over their placement.[=0x0022=][=0x000A=][=0x000A=]Test me with [=0x0022=]test one / test two[=0x0022=].[=0x000A=][=0x000A=]Test one with [=0x0022=]open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke[=0x0022=].[=0x000A=][=0x000A=]Test two with [=0x0022=]throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke[=0x0022=].[=0x000A=]\n', 'Example - Kyoto')"><img alt="create@2x.png" src="inform:/doc_images/create@2x.png" width="26" height="13"></a>&nbsp;&nbsp; &quot;Kyoto&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7874_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7874_380"></a>Part 1 - Throwing Rules
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7875_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7875_380"></a>The futile to throw things at inanimate objects rule is not listed in the check throwing it at rules.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>That &quot;block throwing at&quot; rule also looks sinister: any &quot;block...&quot; rule in the standard actions library is there to print a message telling the player he can't do what he's asked to do.</p>
            <p>But it's not enough to ignore it, the way we did the &quot;futile&quot; rule. Since we are only expanding the command to affect inanimate objects, let's replace the &quot;block throwing at&quot; rule with a different one which will only prevent the player throwing things at people:</p>
            <!--START CODE "c7876_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7876_380"></a>The block throwing at people rule is listed instead of the block throwing at rule in the check throwing it at rules.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7877_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7877_380"></a>This is the block throwing at people rule:
            <br>
            &#160;&#160;&#160;&#160;if the second noun is a person, say &quot;That might be construed as an attack.&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Now we've changed the command so that some action can sometimes be carried out here -- but we don't have any rules for what happens. It's time to create some rules for our model world.</p>
            <!--START CODE "c7878_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7878_380"></a>A thing can be hard or soft. A thing can be fragile or strong. Shape is a kind of value. The shapes are round, flat, and linear. A thing has shape.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>If we're actually going to allow throwing, we might want to add a couple of extra checks to the rulebook to make sure that this happens when it ought:</p>
            <!--START CODE "c7879_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7879_380"></a>Check throwing it at (this is the block juggling rule):
            <br>
            &#160;&#160;&#160;&#160;if the player is carrying the second noun, say &quot;It would be difficult to throw at something you are yourself holding.&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7880_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7880_380"></a>Check throwing it at (this is the avoid throwing things into themselves rule):
            <br>
            &#160;&#160;&#160;&#160;if the second noun is within the noun, say &quot;That would be a nice magic trick.&quot; instead.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>And then the rules for the action itself:</p>
            <!--START CODE "c7881_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7881_380"></a>Carry out throwing it at (this is the check aerodynamics rule):
            <br>
            &#160;&#160;&#160;&#160;if the noun is flat:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move noun to location;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun], unwieldy, flutters to the ground.&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>That &quot;rule succeeds&quot; ends the action here, if the noun is flat. If not, Inform goes on to the next rule in the carry out throwing it at rulebook:</p>
            <!--START CODE "c7882_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7882_380"></a>Carry out throwing it at (this is the contact rule):
            <br>
            &#160;&#160;&#160;&#160;say &quot;[The noun] hits [the second noun].[paragraph break]&quot;;
            <br>
            &#160;&#160;&#160;&#160;if the second noun is fragile and the noun is hard:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;destroy the second noun.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7883_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7883_380"></a>Carry out throwing it at (this is the landing rule):
            <br>
            &#160;&#160;&#160;&#160;let destination be the location;
            <br>
            &#160;&#160;&#160;&#160;if the second noun is on a supporter (called endtable), let destination be the endtable;
            <br>
            &#160;&#160;&#160;&#160;if the second noun is a supporter, let destination be the second noun;
            <br>
            &#160;&#160;&#160;&#160;move the noun to the destination;
            <br>
            &#160;&#160;&#160;&#160;if the noun is fragile and the second noun is hard:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;destroy the noun;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[The noun] lands [if the destination is the location]nearby[otherwise]on [the destination][end if].&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <p>These rules are assuming some backup information, so let's provide that as well:</p>
            <!--START CODE "c7884_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7884_380"></a>Reliance relates a thing (called X) to a thing (called Y) when X is part of Y or X is in Y or X is on Y. The verb to be relying on means the reliance relation.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7885_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7885_380"></a>To destroy (item - a thing):
            <br>
            &#160;&#160;&#160;&#160;let home be the holder of the item;
            <br>
            &#160;&#160;&#160;&#160;if the item is part of something (called the superstructure), let home be the holder of the superstructure;
            <br>
            &#160;&#160;&#160;&#160;if the item is visible:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The item] breaks[if something is relying on the item], leaving [a list of things which are relying on the item] behind[end if].&quot;;
            <br>
            &#160;&#160;&#160;&#160;if something is relying on the item,
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;now all the things which are relying on the item are in the home;
            <br>
            &#160;&#160;&#160;&#160;now the item is nowhere.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>Now suppose we'd like to add some further cases for what happens if the player breaks a fragile door this way:</p>
            <!--START CODE "c7886_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7886_380"></a>To destroy (item - a door):
            <br>
            &#160;&#160;&#160;&#160;now the item is open;
            <br>
            &#160;&#160;&#160;&#160;now the item is unopenable;
            <br>
            &#160;&#160;&#160;&#160;say &quot;[The item] smashes.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7887_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7887_380"></a>Rule for printing the name of an unopenable open door while not throwing something at something:
            <br>
            &#160;&#160;&#160;&#160;say &quot;open doorway&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7888_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7888_380"></a>Understand &quot;door&quot; or &quot;doorway&quot; as a door.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>This works, except that objects will continue to &quot;strike&quot; open, unopenable doors, with the result that the player can smash the same door over and over. What we need is another rule, after the aerodynamics rule and before the contact rule, that tells Inform how to handle throwing things at open doors.</p>
            <!--START CODE "c7889_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7889_380"></a>This is the flying through doorways rule:
            <br>
            &#160;&#160;&#160;&#160;if the second noun is an open door:
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;let the distant room be the other side of the second noun;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;move the noun to the distant room;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;say &quot;[The noun] flies out of sight into [the distant room].&quot;;
            <br>
            &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule succeeds.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>If the original rulebook is one we wrote ourselves, we could just add that rule in the proper spot in order. If we got it from an extension, though, we might need to put it in the right place explicitly:</p>
            <!--START CODE "c7890_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7890_380"></a>The flying through doorways rule is listed before the contact rule in the carry out throwing it at rules.
            </p>
            </blockquote>
            <!--END CODE-->
            <p>The magic of rulebooks is that they allow authors to amend each other's work (or the Standard Rules) with a fair amount of freedom. A well-written extension will give individual names to its rules, to allow subsequent authors to modify the function of the extension without too much trouble.</p>
            <p>Now for an actual scenario with which to test this:</p>
            <!--START CODE "c7891_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7891_380"></a> Part 2 - The Study
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7892_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7892_380"></a>The sliding paper screen is a door. It is north of the Moss Garden and south of the Study. The paper screen is fragile.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7893_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7893_380"></a>The player carries a netsuke and a shamisen. The description of the netsuke is &quot;A weight for the cord on which you wear your purse or your medicine box. This particular one has the shape of a bullfrog, carved from green stone.&quot; The netsuke is round, hard, and strong. Understand &quot;green&quot; or &quot;stone&quot; or &quot;bullfrog&quot; as the netsuke.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7894_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7894_380"></a>The description of the shamisen is &quot;An instrument you have only begun to learn to play.&quot; The shamisen is linear, soft, and fragile. A neck is part of the shamisen. The neck is linear, strong, and hard. A body is part of the shamisen. The body is round, fragile, and soft. A string is part of the shamisen. The string is linear, soft, and strong. The printed name of the body is &quot;[if the body is not part of the shamisen]shamisen [end if]body&quot;. The printed name of the neck is &quot;[if the neck is not part of the shamisen]shamisen [end if]neck&quot;. Understand &quot;shamisen&quot; as the body when the body is not part of the shamisen. Understand &quot;shamisen&quot; as the neck when the neck is not part of the shamisen.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7895_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7895_380"></a>The description of the Study is &quot;A restful three-tatami room.&quot; The Study contains a calligraphy box and a hanging scroll. The initial appearance of the hanging scroll is &quot;A handsome scroll depicts two women in kimonos crossing a bridge; Mount Fuji is in the background.&quot; The calligraphy box contains a brush. The box is openable and closed. The brush is hard, linear, and strong. The calligraphy box is round, soft, and strong. The hanging scroll is flat, soft, and strong.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7896_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7896_380"></a>The description of the Moss Garden is &quot;Earlier today, you arranged three leaves on the moss in imitation of autumn. They must not be disturbed.&quot; The leaves are scenery in the Moss Garden. Instead of throwing something at the leaves: say &quot;You spent too long over their placement.&quot;
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7897_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7897_380"></a>Test me with &quot;test one / test two&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7898_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7898_380"></a>Test one with &quot;open screen / throw netsuke at screen / n / get netsuke / close screen / get scroll / throw scroll at screen / throw netsuke at scroll / get netsuke / throw netsuke at shamisen / drop netsuke&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
            <!--START CODE "c7899_380"-->
            <blockquote class="code"><p class="quoted"><a id="c7899_380"></a>Test two with &quot;throw shamisen at netsuke / get all / throw netsuke at screen / get netsuke / throw netsuke at door / s / get netsuke&quot;.
            </p>
            </blockquote>
            <!--END CODE-->
        </div>
        <p></p>
        <!--END EXAMPLE-->
        <hr>
    </div>
    <!--START IGNORE-->
    <div class="bookfooter">
        <table class="fullwidth">
            <tr>
                <td class="footerprevious">
                    <a href="doc334.html" class="footerlink">Previous</a>
                </td>
                <td class="footercontents">
                    <a href="index.html" class="footerlink">Contents</a>
                </td>
                <td class="footernext">
                    <a href="doc336.html" class="footerlink">Next</a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
</body>
</html>
