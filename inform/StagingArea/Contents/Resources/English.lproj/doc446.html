<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 3 Dec 2014 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>27.18. Making and testing use options</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "Making and testing use options" -->
<!-- SEARCH SECTION "27.18" -->
<!-- SEARCH SORT "000-027-018-000" -->
<!-- START IGNORE 445 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc445.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 27: Extensions</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc447.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง27.18. Making and testing use options</p>
<p>Use options (see Chapter 2 above) manifest themselves in the I6 code generated by I7 as constants which are either defined, or not. For instance, the &quot;use American dialect&quot; option results in the constant DIALECT_US being defined, a constant which otherwise would not be. Some use options define the constant as a particular value, others simply define it (so that I6 gives this constant the value 0).</p>
<p>New use options can be created as in the following examples, which are found in the Standard Rules:</p>
<!-- START CODE "c9163" -->
<a id="c9163"></a><blockquote class="code"><p class="quoted">
Use American dialect translates as (- Constant DIALECT_US; -).
<br />Use full-length room descriptions translates as (- Constant I7_LOOKMODE = 2; -).
</p></blockquote>
<!-- END CODE -->
<p>Most Inform users will not need to test whether a use option is currently set: after all, they will know whether or not their own game uses American dialect. But an extension does not know what use options apply in the game which is using it. An extension which needs to print a list, using its own formatting, might want to know whether &quot;use serial comma&quot; is set. Or it might want to speak differently in American dialect.</p>
<p>To test for American dialect, we should ideally not use I6 to look for the constant DIALECT_US using #ifdef: there is no guarantee that this constant will not be renamed at some point. Instead we can perform the test directly in I7:</p>
<!-- START CODE "c9164" -->
<a id="c9164"></a><blockquote class="code"><p class="quoted">
if the American dialect option is active, ...
</p></blockquote>
<!-- END CODE -->
<p>and similarly for all other named use options. The adjectives &quot;active&quot; and &quot;inactive&quot; have the obvious meanings for use options. This means it's possible to describe the current options like so:</p>
<!-- START CODE "c9165" -->
<a id="c9165"></a><blockquote class="code"><p class="quoted">
say &quot;We're currently using: [list of active use options].&quot;;
</p></blockquote>
<!-- END CODE -->
<p>The result might be, say,</p>
<!-- START CODE "c9166" -->
<a id="c9166"></a><blockquote class="code"><p class="quoted">
We're currently using: dynamic memory allocation option [8192], maximum text length option [1024], maximum things understood at once option [100], American dialect option and fast route-finding option.
</p></blockquote>
<!-- END CODE -->
<p>This may be useful for testing purposes.</p>
<p>Use options can also allow the writer to raise certain maximum values. If we write an extension which needs some I6 array, say, and therefore has some limitation - for instance a footnotes presenter which can handle at most 100 footnotes before its array space runs out - it would obviously be cleaner to allow this maximum to be raised. We can set this up like so:</p>
<!-- START CODE "c9167" -->
<a id="c9167"></a><blockquote class="code"><p class="quoted">
Use maximum presented footnotes of at least 100 translates as (- Constant MAX_PRESENTED_FOOTNOTES = {N}; -).
</p></blockquote>
<!-- END CODE -->
<p>With such a definition, the number given is the default value, and the I6 source is included whether or not anybody uses the option: the default value being given if nobody does. The text &quot;{N}&quot; is replaced with the value. So the above definition normally results in this being defined:</p>
<!-- START CODE "c9168" -->
<a id="c9168"></a><blockquote class="code"><p class="quoted">
Constant MAX_PRESENTED_FOOTNOTES = 100;
</p></blockquote>
<!-- END CODE -->
<p>but if the user writes</p>
<!-- START CODE "c9169" -->
<a id="c9169"></a><blockquote class="code"><p class="quoted">
Use maximum presented footnotes of at least 350.
</p></blockquote>
<!-- END CODE -->
<p>then instead the I6 inclusion becomes:</p>
<!-- START CODE "c9170" -->
<a id="c9170"></a><blockquote class="code"><p class="quoted">
Constant MAX_PRESENTED_FOOTNOTES = 350;
</p></blockquote>
<!-- END CODE -->
<p>The I6 constant MAX_PRESENTED_FOOTNOTES can then be used as the size of an array, for instance.</p>
<hr />
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc445.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc447.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
