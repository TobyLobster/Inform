<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Generated by indoc on 8 Jan 2016 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="indoc_WI.css" rel="stylesheet" type="text/css" />
<title>19.7. The preamble of a rule</title>
<script type="text/javascript">
    function showExtra(id, imid) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
            document.getElementById(imid).src = 'inform:/doc_images/extra.png';
        } else {
            document.getElementById(id).style.display = 'block';
            document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
        }
    }
    function onLoaded() {
        if (window.location.hash) {
            var hash = window.location.hash.substring(2);
            if (hash.search("_") >= 0) {
                var res = hash.split("_");
                showExample("example"+res[1]);
            } else {
                showExample("example"+hash);
            }
        }
    }
    window.onload=onLoaded;
    function showExample(id) {
        if (document.getElementById(id).style.display == 'block') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
    function openExtra(id, imid) {
        document.getElementById(id).style.display = 'block';
        document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
    }
    function closeExtra(id, imid) {
        document.getElementById(id).style.display = 'none';
        document.getElementById(imid).src = 'inform:/doc_images/extra.png';
    }
</script>
</head>
<body class="paper papertint"><script language="JavaScript">
function pasteCode(code) {
    var myProject = window.Project;

    myProject.selectView('source');
    myProject.pasteCode(code);
}
</script>
<script language="JavaScript">
function createNewProject(code, title) {
    var myProject = window.Project;

    myProject.createNewProject(title, code);
}
</script>

<!-- SEARCH TITLE "The preamble of a rule" -->
<!-- SEARCH SECTION "19.7" -->
<!-- SEARCH SORT "000-019-007-000" -->
<!-- START IGNORE 332 -->
<div class="bookheader">
<table class="fullwidth midnightblack"><tr><td class="midnightbannerleftcell"><a href="doc332.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft" /></a></td><td class="midnightbannercentrecell"><a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 19: Rulebooks</span></a></td><td class="midnightbannerrightcell"><a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup" /></a><a href="doc334.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright" /></a></td></tr></table></div>
<!-- END IGNORE -->
<p class="sectionheading">ยง19.7. The preamble of a rule</p>
<p>In general, a rule looks like this:</p>
<!-- START CODE "c7557" -->
<a id="c7557"></a><blockquote class="code"><p class="quoted">
preamble : list of one or more phrases divided by semicolons
</p></blockquote>
<!-- END CODE -->
<p>though in a few common cases (where the preamble begins with Before, After, Instead of, Every turn, or When, and there is only one phrase in the list) the colon can be replaced with a comma. Three kinds of declaration are special, and these we can tell apart by the first word:</p>
<!-- START CODE "c7558" -->
<a id="c7558"></a><blockquote class="code"><p class="quoted">
To ... - a new phrase: see the chapter on Phrases
<br />At ... - something due to happen at a given time: see Time
<br />Definition: ... - a new adjective: see Descriptions
</p></blockquote>
<!-- END CODE -->
<p>All other declarations (that is, starting with any other word) create rules fit for going into rulebooks. The preamble can either just be a name, which is required to end with the word &quot;rule&quot;, or it can give circumstances and have no name, or it can do both:</p>
<!-- START CODE "c7559" -->
<a id="c7559"></a><blockquote class="code"><p class="quoted">
This is the ...name of rule...
<br />...circumstances...
<br />...circumstances... (this is the ...name of rule...)
</p></blockquote>
<!-- END CODE -->
<p>The circumstances should be a sequence of the following ingredients, each of which is optional except the name of the rulebook:</p>
<!-- START CODE "c7560" -->
<a id="c7560"></a><blockquote class="code"><p class="quoted">
first <span class="italic">or</span> last
<br /><span class="italic">followed by</span> ...rulebook name...
<br /><span class="italic">followed by</span> about <span class="italic">or</span> for <span class="italic">or</span> of <span class="italic">or</span> on <span class="italic">or</span> rule
<br /><span class="italic">followed by</span> ...what to apply to...
<br /><span class="italic">followed by</span> while <span class="italic">or</span> when ...condition...
<br /><span class="italic">followed by</span> during ...a scene...
</p></blockquote>
<!-- END CODE -->
<p>The word &quot;first&quot; or &quot;last&quot;, if present, is significant: it tells Inform exactly where the new rule should be placed into its rulebook, and so overrides the normal practice of placing the rule according to how specific it is.</p>
<p>On the other hand, the use of any of the following:</p>
<!-- START CODE "c7561" -->
<a id="c7561"></a><blockquote class="code"><p class="quoted">
for
<br />of
<br />rule about
<br />rule for
<br />rule on
</p></blockquote>
<!-- END CODE -->
<p>is purely to make the text easier to read: Inform does not make any direct use of these words (except perhaps that it may help to avoid ambiguities by separating the rulebook name from what is being applied to). Thus in the rule</p>
<!-- START CODE "c7562" -->
<a id="c7562"></a><blockquote class="code"><p class="quoted">
Instead of kissing Clark: ...
</p></blockquote>
<!-- END CODE -->
<p>the word &quot;instead&quot; is the rulebook's name, while &quot;of&quot; is technically optional. &quot;Instead rule about kissing Clark: ...&quot; would work just as well.</p>
<p>In this whole list of possible ingredients, only the rulebook name is compulsory. We could define a rule called simply &quot;Instead: ...&quot; if we wanted - though its universal applicability would make it pretty disruptive, with every action stopped in its tracks.</p>
<hr />
<div class="bookexamples">
<p class="chapterheading"></p><!-- START EXAMPLE "399: Backus-Naur form for rules" "e42" -->
<a id="e42"></a><table class="egcue"><tr><td class="egcellforoval"><div class="egovalfornumber overstruckimage">
<a href="#" class="eglink" onclick="showExample('example42'); return false;"><b>399</b></a></div>
</td><td class="egnamecell"><p class="egcuetext"><a href="#" class="eglink" onclick="showExample('example42'); return false;"><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><img class="asterisk" alt="*" src="inform:/doc_images/asterisk.png" /><b><span class="egbanner">Example</span><span class="egname">Backus-Naur form for rules</span></b></a><br />The full grammar Inform uses to parse rule definitions, in a standard computer-science notation.</p></td><td class="egcrossref"><!-- START IGNORE -->
<div class="egovalforxref overstruckimage">
<a  href="Rdoc4.html#e42"><i>RB</i></a></div>
<!-- END IGNORE -->
</td></tr></table>
<div class="egpanel" id="example42" style="display: none;">
<p>Backus-Naur form, or BNF, is a standard notation used by computer scientists to specify more or less precisely what the valid programs are for a given programming language. It tends to provide a good description for a language such as C or Pascal, where contextual rules are limited, but the authors of Inform are doubtful that it is such a good tool for a natural-language system. For those who are interested, though, the following gives a formal specification for Inform's rules.</p>
<!-- START CODE "c7563_42" -->
<a id="c7563_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; ::=
<br />&#160;&#160;&#160;&#160;Definition : A/an &lt;kind&gt; is &lt;new adjectival name&gt; if/unless &lt;definition&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; : &lt;phrases&gt;
<br />&#160;&#160;&#160;&#160;| &lt;preamble&gt; , &lt;phrase&gt;    (* only allowed for a few cases: see below)
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7564_42" -->
<a id="c7564_42"></a><blockquote class="code"><p class="quoted">
&lt;definition&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;condition&gt;
<br />&#160;&#160;&#160;&#160;| its/his/her/their &lt;value property name&gt; is/are &lt;value&gt; or less/more
<br />&#160;&#160;&#160;&#160;| : &lt;phrases&gt;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7565_42" -->
<a id="c7565_42"></a><blockquote class="code"><p class="quoted">
&lt;preamble&gt; ::=
<br />&#160;&#160;&#160;&#160;To &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide if/whether &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| To decide which/what &lt;kind of value&gt; is &lt;phrase template&gt;
<br />&#160;&#160;&#160;&#160;| This is the &lt;rule name&gt;
<br />&#160;&#160;&#160;&#160;| [[A] Rule for] &lt;circumstances&gt; [(this is the &lt;rule name&gt;)]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7566_42" -->
<a id="c7566_42"></a><blockquote class="code"><p class="quoted">
&lt;circumstances&gt; ::=
<br />&#160;&#160;&#160;&#160;At &lt;time&gt;
<br />&#160;&#160;&#160;&#160;| When &lt;event name&gt;
<br />&#160;&#160;&#160;&#160;| [&lt;placement&gt;] &lt;rulebook reference&gt; [while/when &lt;condition&gt;] [during &lt;scene name&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7567_42" -->
<a id="c7567_42"></a><blockquote class="code"><p class="quoted">
&lt;rulebook reference&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;rulebook name&gt; [about/for/of/on/rule] [&lt;action pattern&gt;]
<br />&#160;&#160;&#160;&#160;| &lt;object-based-rulebook name&gt; [about/for/of/on/rule] [&lt;description&gt;]
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7568_42" -->
<a id="c7568_42"></a><blockquote class="code"><p class="quoted">
&lt;placement&gt; ::=
<br />&#160;&#160;&#160;&#160;a/an
<br />&#160;&#160;&#160;&#160;| [the] first
<br />&#160;&#160;&#160;&#160;| [the] last
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7569_42" -->
<a id="c7569_42"></a><blockquote class="code"><p class="quoted">
&lt;phrases&gt; ::=
<br />&#160;&#160;&#160;&#160;&lt;phrase&gt;
<br />&#160;&#160;&#160;&#160;| &lt;phrases&gt; ; &lt;phrase&gt;
</p></blockquote>
<!-- END CODE -->
<p>The following examples show how Inform breaks down some typical rules using the system above:</p>
<!-- START CODE "c7570_42" -->
<a id="c7570_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = At 2:09 PM: increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = At 2:09 PM
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;At
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;time&gt; = 2:09 PM
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = increase the score by 2; say &quot;Progress!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = increase the score by 2
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;Progress&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7571_42" -->
<a id="c7571_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule), say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = Instead of eating the ostrich during Formal Dinner (this is the cuisine rule)
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = Instead of eating the ostrich during Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = Instead of eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook name&gt; = Instead
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;action pattern&gt; = eating the ostrich
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;during
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;scene name&gt; = Formal Dinner
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rule name&gt; = cuisine rule
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;)
<br />&#160;&#160;&#160;&#160;,
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;It's greasy!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;It's greasy!&quot;
</p></blockquote>
<!-- END CODE -->
<!-- START CODE "c7572_42" -->
<a id="c7572_42"></a><blockquote class="code"><p class="quoted">
&lt;rule&gt; = After printing the name of a container: say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&lt;preamble&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;circumstances&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;rulebook reference&gt; = After printing the name of a container
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;object-based-rulebook name&gt; = After printing the name
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;description&gt; = a container
<br />&#160;&#160;&#160;&#160;:
<br />&#160;&#160;&#160;&#160;&lt;phrases&gt; = say &quot;!&quot;
<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;phrase&gt; = say &quot;!&quot;
</p></blockquote>
<!-- END CODE -->
<p>(*) The colon dividing a rule preamble from its definition can be replaced by a comma only if the preamble begins with the words &quot;Instead of&quot;, &quot;Before&quot;, &quot;After&quot;, &quot;Every turn&quot; or &quot;When&quot;, and if the definition consists only of a single phrase.</p>
</div>
<p></p>
<!-- END EXAMPLE -->
<hr />
</div>
<!-- START IGNORE -->
<div class="bookfooter">
<table class="fullwidth"><tr><td class="footerprevious"><a href="doc332.html" class="footerlink">Previous</a></td><td class="footercontents"><a href="index.html" class="footerlink">Contents</a></td><td class="footernext"><a href="doc334.html" class="footerlink">Next</a></td></tr></table>
</div>
<!-- END IGNORE -->
</body>
</html>
